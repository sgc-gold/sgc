<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>宝石重量計算ツール</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500&family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg:       #0A0C0B;
  --bg2:      #0F1410;
  --bg3:      #141A15;
  --panel:    rgba(255,255,255,0.04);
  --border:   rgba(192,154,80,0.18);
  --border2:  rgba(192,154,80,0.38);
  --gold:     #C09A50;
  --gold-lt:  #E8D49A;
  --gold-dk:  #8A6A28;
  --white:    #F5F0E8;
  --muted:    rgba(245,240,232,0.45);
  --dim:      rgba(245,240,232,0.22);
  --green:    #1A3628;
  --r:        12px;
}

html{background:var(--bg)}
body{
  font-family:'DM Sans',sans-serif;
  background:var(--bg);
  color:var(--white);
  min-height:100vh;
  padding-bottom:80px;
  overflow-x:hidden;
}
body::before{
  content:'';
  position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  opacity:.55;
}

/* ─── Header ─── */
.page-header{
  position:relative;z-index:1;
  text-align:center;
  padding:44px 24px 36px;
  border-bottom:1px solid var(--border);
  background:linear-gradient(180deg,rgba(14,20,14,.9) 0%,transparent 100%);
}
.page-header::after{
  content:'';
  position:absolute;bottom:-1px;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--gold-dk) 25%,var(--gold) 50%,var(--gold-dk) 75%,transparent);
}
.header-eyebrow{font-family:'DM Mono',monospace;font-size:.6rem;letter-spacing:.4em;color:var(--gold-dk);text-transform:uppercase;margin-bottom:10px}
.header-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,6vw,3.2rem);font-weight:300;letter-spacing:.15em;line-height:1.1}
.header-title em{font-style:italic;color:var(--gold)}
.header-sub{font-family:'DM Mono',monospace;font-size:.62rem;letter-spacing:.2em;color:var(--dim);margin-top:12px}
.header-orn{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:18px}
.header-orn::before,.header-orn::after{content:'';flex:1;max-width:80px;height:1px;background:linear-gradient(90deg,transparent,rgba(192,154,80,.4))}
.header-orn::after{background:linear-gradient(90deg,rgba(192,154,80,.4),transparent)}
.orn-gem{width:10px;height:10px;background:var(--gold);clip-path:polygon(50% 0%,100% 38%,82% 100%,18% 100%,0% 38%)}

/* ─── Layout ─── */
.wrap{position:relative;z-index:1;max-width:720px;margin:0 auto;padding:32px 18px}
.section{margin-bottom:28px}
.section-label{
  font-family:'DM Mono',monospace;font-size:.58rem;letter-spacing:.3em;text-transform:uppercase;
  color:var(--gold-dk);margin-bottom:12px;display:flex;align-items:center;gap:10px;
}
.section-label::after{content:'';flex:1;height:1px;background:var(--border)}

/* ─── Step badge ─── */
.step-badge{
  display:inline-flex;align-items:center;justify-content:center;
  width:22px;height:22px;border-radius:50%;
  background:rgba(192,154,80,.15);border:1px solid rgba(192,154,80,.35);
  font-family:'DM Mono',monospace;font-size:.65rem;font-weight:500;
  color:var(--gold);flex-shrink:0;margin-right:6px;
}

/* ─── Search box ─── */
.search-wrap{position:relative;margin-bottom:14px}
.search-wrap svg{position:absolute;left:14px;top:50%;transform:translateY(-50%);opacity:.4;pointer-events:none}
.search-input{
  width:100%;
  font-family:'DM Sans',sans-serif;font-size:.9rem;
  background:var(--panel);border:1px solid var(--border);border-radius:var(--r);
  color:var(--white);padding:0 14px 0 42px;height:46px;
  outline:none;transition:border-color .2s,box-shadow .2s;
}
.search-input::placeholder{color:var(--dim)}
.search-input:focus{border-color:rgba(192,154,80,.5);box-shadow:0 0 0 3px rgba(192,154,80,.08)}

/* ─── Color group tiles ─── */
.color-tiles{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(76px,1fr));
  gap:8px;margin-bottom:6px;
}
.color-tile{
  background:var(--panel);border:1px solid var(--border);border-radius:10px;
  padding:10px 6px 8px;cursor:pointer;
  display:flex;flex-direction:column;align-items:center;gap:5px;
  transition:border-color .18s,background .18s,transform .15s;
  -webkit-tap-highlight-color:transparent;
}
.color-tile:hover{border-color:rgba(192,154,80,.4);background:rgba(255,255,255,.07);transform:translateY(-1px)}
.color-tile.active{border-color:var(--gold);background:rgba(192,154,80,.12);box-shadow:0 0 0 1px var(--gold-dk)}
.color-tile.active .tile-label{color:var(--gold-lt)}
.tile-swatch{width:32px;height:32px;border-radius:50%;border:1.5px solid rgba(255,255,255,.1)}
.tile-label{font-size:.58rem;color:var(--muted);text-align:center;line-height:1.3;white-space:nowrap}

/* ─── Gem card grid ─── */
.gem-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
  gap:10px;
  max-height:420px;overflow-y:auto;
  padding:2px 2px 8px;
  scrollbar-width:thin;scrollbar-color:rgba(192,154,80,.18) transparent;
}
.gem-grid::-webkit-scrollbar{width:4px}
.gem-grid::-webkit-scrollbar-thumb{background:rgba(192,154,80,.2);border-radius:4px}
.gem-grid.search-mode{max-height:none}

.gem-card{
  background:var(--panel);border:1px solid var(--border);border-radius:10px;
  overflow:hidden;cursor:pointer;
  transition:border-color .18s,transform .15s,box-shadow .18s;
  -webkit-tap-highlight-color:transparent;
}
.gem-card:hover{border-color:rgba(192,154,80,.4);transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.3)}
.gem-card.active{border-color:var(--gold);box-shadow:0 0 0 1px var(--gold-dk),0 4px 20px rgba(192,154,80,.15)}
.gem-card.hidden{display:none}

.gem-photo{
  width:100%;aspect-ratio:1;overflow:hidden;position:relative;
  background:var(--bg3);
}
.gem-photo img{
  width:100%;height:100%;object-fit:cover;display:block;
  transition:transform .3s ease;
}
.gem-card:hover .gem-photo img{transform:scale(1.06)}
.gem-photo .swatch-fallback{
  width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
}
.gem-info{padding:7px 8px 8px}
.gem-name{
  font-family:'Noto Sans JP',sans-serif;
  font-size:.72rem;font-weight:500;color:var(--white);
  line-height:1.3;word-break:break-all;
}
.gem-sg{
  font-family:'DM Mono',monospace;font-size:.58rem;
  color:var(--dim);margin-top:2px;
}
.gem-card.active .gem-name{color:var(--gold-lt)}
.gem-card.active .gem-sg{color:var(--gold-dk)}

/* Selected gem display */
.gem-selected-banner{
  display:none;
  background:rgba(192,154,80,.07);border:1px solid rgba(192,154,80,.25);
  border-radius:10px;padding:12px 14px;margin-bottom:16px;
  align-items:center;gap:12px;
}
.gem-selected-banner.show{display:flex}
.gem-selected-thumb{
  width:48px;height:48px;border-radius:8px;overflow:hidden;flex-shrink:0;
  background:var(--bg3);
}
.gem-selected-thumb img{width:100%;height:100%;object-fit:cover}
.gem-selected-info{flex:1;min-width:0}
.gem-selected-name{font-family:'Noto Sans JP',sans-serif;font-size:.95rem;font-weight:500;color:var(--white)}
.gem-selected-desc{font-size:.7rem;color:var(--muted);margin-top:2px;line-height:1.4}
.gem-selected-sg{font-family:'DM Mono',monospace;font-size:.7rem;color:var(--gold-dk);margin-top:4px}
.gem-change-btn{
  background:none;border:1px solid var(--border);border-radius:7px;
  color:var(--dim);font-size:.62rem;font-family:'DM Mono',monospace;
  letter-spacing:.06em;padding:4px 10px;cursor:pointer;
  transition:color .15s,border-color .15s;white-space:nowrap;flex-shrink:0;
}
.gem-change-btn:hover{color:var(--white);border-color:rgba(255,255,255,.25)}

/* ─── Cut grid ─── */
.cut-group{margin-bottom:14px}
.cut-group-title{
  font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;
  color:var(--dim);margin-bottom:8px;font-family:'DM Mono',monospace;
}
.cut-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(80px,1fr));
  gap:8px;
}
.cut-card{
  background:var(--panel);border:1px solid var(--border);border-radius:10px;
  padding:10px 6px 8px;cursor:pointer;
  transition:border-color .18s,background .18s,transform .15s,box-shadow .18s;
  display:flex;flex-direction:column;align-items:center;gap:6px;
  text-align:center;-webkit-tap-highlight-color:transparent;
}
.cut-card:hover{border-color:rgba(192,154,80,.4);background:rgba(255,255,255,.07);transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.3)}
.cut-card.active{border-color:var(--gold);background:rgba(192,154,80,.1);box-shadow:0 0 0 1px var(--gold-dk),0 4px 20px rgba(192,154,80,.15)}
.cut-card .cut-svg{width:44px;height:44px;display:flex;align-items:center;justify-content:center}
.cut-card .cut-name{font-size:.62rem;color:var(--muted);line-height:1.3;word-break:keep-all}
.cut-card.active .cut-name{color:var(--gold-lt)}

/* ─── Dimension fields ─── */
.dim-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px}
.dim-field{display:flex;flex-direction:column;gap:5px}
.dim-label{font-size:.65rem;letter-spacing:.1em;color:var(--muted)}
.dim-input{
  width:100%;
  font-family:'DM Mono',monospace;font-size:.95rem;letter-spacing:.05em;
  background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:9px;
  color:var(--white);padding:0 14px;height:46px;
  outline:none;transition:border-color .2s,box-shadow .2s;appearance:none;
  -moz-appearance:textfield;
}
.dim-input::-webkit-inner-spin-button,.dim-input::-webkit-outer-spin-button{-webkit-appearance:none}
.dim-input::placeholder{color:var(--dim)}
.dim-input:focus{border-color:rgba(192,154,80,.5);box-shadow:0 0 0 3px rgba(192,154,80,.08)}

/* ─── Buttons ─── */
.btn-row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;margin-top:8px;align-items:end}
.btn{
  height:56px;display:flex;align-items:center;justify-content:center;gap:8px;
  border:none;border-radius:var(--r);
  font-family:'Cormorant Garamond',serif;font-size:1.1rem;letter-spacing:.12em;
  cursor:pointer;transition:transform .15s,box-shadow .18s,opacity .15s;
}
.btn:active{transform:scale(.97)}
.btn-calc{
  background:linear-gradient(135deg,#2a4a35 0%,#1a3628 50%,#0f2219 100%);
  border:1px solid rgba(192,154,80,.35);color:var(--gold-lt);
  box-shadow:0 4px 20px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.06);
}
.btn-calc:hover{box-shadow:0 6px 28px rgba(192,154,80,.2),inset 0 1px 0 rgba(255,255,255,.06);border-color:rgba(192,154,80,.6)}
.btn-reset{
  width:56px;height:56px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);
  color:var(--muted);border-radius:var(--r);cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:background .18s,border-color .18s,color .18s;
}
.btn-reset:hover{background:rgba(255,255,255,.09);color:var(--white);border-color:rgba(255,255,255,.2)}

/* ─── Multiplier Drum ─── */
.multiplier-drum-wrap{
  display:flex;flex-direction:column;align-items:center;gap:4px;
  background:rgba(192,154,80,.06);
  border:1px solid var(--border);
  border-radius:var(--r);
  padding:6px 10px 8px;
  min-width:80px;
  height:56px;
  justify-content:center;
  position:relative;
  overflow:hidden;
}
.multiplier-drum-wrap::before,
.multiplier-drum-wrap::after{
  content:'';
  position:absolute;left:0;right:0;height:14px;z-index:2;pointer-events:none;
}
.multiplier-drum-wrap::before{
  top:0;
  background:linear-gradient(to bottom, rgba(10,12,11,.9) 0%, transparent 100%);
}
.multiplier-drum-wrap::after{
  bottom:0;
  background:linear-gradient(to top, rgba(10,12,11,.9) 0%, transparent 100%);
}
.drum-label{
  font-family:'DM Mono',monospace;font-size:.48rem;letter-spacing:.2em;text-transform:uppercase;
  color:var(--gold-dk);line-height:1;margin-bottom:2px;
}
.drum-value-row{
  display:flex;align-items:center;gap:0;
}
.drum-btn{
  background:none;border:none;cursor:pointer;
  color:var(--gold-dk);padding:0 4px;
  display:flex;align-items:center;justify-content:center;
  transition:color .15s,transform .1s;
  -webkit-tap-highlight-color:transparent;
  font-size:.7rem;line-height:1;
}
.drum-btn:hover{color:var(--gold)}
.drum-btn:active{transform:scale(.85)}

.drum-viewport{
  width:48px;height:30px;
  overflow:hidden;
  position:relative;
}
.drum-track{
  display:flex;flex-direction:column;
  transition:transform 0.22s cubic-bezier(0.4,0,0.2,1);
  will-change:transform;
}
.drum-item{
  height:30px;
  display:flex;align-items:center;justify-content:center;
  font-family:'DM Mono',monospace;font-size:1rem;font-weight:500;
  color:var(--gold-lt);letter-spacing:.04em;
  flex-shrink:0;
  user-select:none;
}
.drum-item.dim{color:var(--gold-dk);font-size:.8rem;}
.drum-item.far-dim{color:rgba(192,154,80,.2);font-size:.65rem;}

/* ─── Result panel ─── */
.result-panel{
  background:linear-gradient(135deg,rgba(192,154,80,.08) 0%,rgba(14,20,14,.6) 100%);
  border:1px solid var(--border);border-radius:16px;padding:28px 24px;
  text-align:center;position:relative;overflow:hidden;
  transition:border-color .4s,box-shadow .4s;
}
.result-panel::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--gold-dk) 30%,var(--gold) 50%,var(--gold-dk) 70%,transparent);
}
.result-panel.has-value{border-color:rgba(192,154,80,.4);box-shadow:0 0 40px rgba(192,154,80,.08)}
.result-label{font-family:'DM Mono',monospace;font-size:.58rem;letter-spacing:.3em;text-transform:uppercase;color:var(--gold-dk);margin-bottom:16px}
.result-values{display:flex;align-items:baseline;justify-content:center;gap:12px;flex-wrap:wrap}
.result-main{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,8vw,3.8rem);font-weight:300;color:var(--gold-lt);letter-spacing:.04em;line-height:1}
.result-main .unit{font-size:.45em;color:var(--gold);letter-spacing:.15em;margin-left:4px}
.result-divider{font-size:1.5rem;color:var(--border2);font-weight:300}
.result-ct{font-family:'Cormorant Garamond',serif;font-size:clamp(1.6rem,5vw,2.6rem);font-weight:300;color:var(--muted);letter-spacing:.04em;line-height:1}
.result-ct .unit{font-size:.45em;color:rgba(245,240,232,.35);letter-spacing:.15em;margin-left:4px}
.result-calib-note{font-size:.65rem;color:var(--dim);margin-top:12px;font-family:'DM Mono',monospace;letter-spacing:.05em}
.result-gem-name{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:.88rem;color:var(--gold-dk);margin-top:4px;letter-spacing:.08em}

/* ─── Admin link ─── */
.admin-link{text-align:right;font-size:.68rem;margin-top:20px;font-family:'DM Mono',monospace;letter-spacing:.06em}
.admin-link a{color:var(--dim);text-decoration:none;transition:color .2s}
.admin-link a:hover{color:var(--gold-dk)}

/* ─── Mobile ─── */
@media(max-width:480px){
  .color-tiles{grid-template-columns:repeat(5,1fr)}
  .gem-grid{grid-template-columns:repeat(auto-fill,minmax(90px,1fr))}
  .cut-grid{grid-template-columns:repeat(4,1fr)}
  .dim-grid{grid-template-columns:1fr 1fr}
  .btn-row{grid-template-columns:auto 1fr auto}
  .multiplier-drum-wrap{min-width:72px}
}
</style>
</head>
<body>

<div class="page-header">
  <div class="header-eyebrow">SGC GROUP — Gemological Tools</div>
  <div class="header-title"><em>宝石</em>重量計算</div>
  <div class="header-sub">GEMSTONE WEIGHT ESTIMATOR</div>
  <div class="header-orn"><div class="orn-gem"></div></div>
</div>

<div class="wrap">

  <!-- ═══ STEP 1: 石を選ぶ ═══ -->
  <div class="section" id="sectionGem">
    <div class="section-label">
      <span class="step-badge">1</span>
      石の種類 · Gemstone
    </div>

    <!-- Search -->
    <div class="search-wrap">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      <input class="search-input" id="searchInput" type="text" placeholder="石の名前で検索…">
    </div>

    <!-- Color tiles -->
    <div class="color-tiles" id="colorTiles"></div>

    <!-- Gem card grid -->
    <div class="gem-grid" id="gemGrid"></div>

    <!-- Selected gem banner (shown after selection) -->
    <div class="gem-selected-banner" id="gemBanner">
      <div class="gem-selected-thumb" id="bannerThumb"></div>
      <div class="gem-selected-info">
        <div class="gem-selected-name" id="bannerName"></div>
        <div class="gem-selected-desc" id="bannerDesc"></div>
        <div class="gem-selected-sg" id="bannerSg"></div>
      </div>
      <button class="gem-change-btn" onclick="showGemGrid()">変更</button>
    </div>
  </div>

  <!-- ═══ STEP 2: カットを選ぶ ═══ -->
  <div class="section" id="sectionCut">
    <div class="section-label">
      <span class="step-badge">2</span>
      カットの形 · Cut Shape
    </div>
    <div id="cutGroups"></div>
  </div>

  <!-- ═══ STEP 3: 寸法と計算 ═══ -->
  <div class="section" id="sectionDim">
    <div class="section-label">
      <span class="step-badge">3</span>
      寸法入力 · Measurements (mm)
    </div>
    <div class="dim-grid" id="dimGrid"></div>

    <!-- btn-row: multiplier | calc | reset -->
    <div class="btn-row" style="margin-top:14px">

      <!-- Multiplier Drum -->
      <div class="multiplier-drum-wrap" id="multiplierDrum" title="掛け率">
        <div class="drum-label">掛け率</div>
        <div class="drum-value-row">
          <button class="drum-btn" id="drumDown" aria-label="減らす">&#9650;</button>
          <div class="drum-viewport" id="drumViewport">
            <div class="drum-track" id="drumTrack"></div>
          </div>
          <button class="drum-btn" id="drumUp" aria-label="増やす">&#9660;</button>
        </div>
      </div>

      <button class="btn btn-calc" id="calcBtn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/></svg>
        重量を計算する
      </button>
      <button class="btn-reset" id="resetBtn" title="リセット">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 .49-3.65"/></svg>
      </button>
    </div>
  </div>

  <!-- ═══ Result ═══ -->
  <div class="result-panel" id="resultPanel">
    <div class="result-label">Estimated Weight · 推定重量</div>
    <div class="result-values">
      <div class="result-main"><span id="resultG">0.000</span><span class="unit">g</span></div>
      <div class="result-divider">/</div>
      <div class="result-ct"><span id="resultCt">0.000</span><span class="unit">ct</span></div>
    </div>
    <div class="result-gem-name" id="resultGemName"></div>
    <div class="result-calib-note" id="calibNote"></div>
  </div>

  <div class="admin-link"><a href="register.html">▸ 補正データ登録 (管理者用)</a></div>
</div>

<script>
const GEMSTONES_DATA = [
  {"id":"diamond","name_ja":"ダイヤモンド","sg_min":3.5,"sg_max":3.53,"sg_std":3.52,"color_group":"colorless","description":"最硬の宝石。輝きと分散の王者。地球最深部からの贈り物","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Brillanten.jpg/320px-Brillanten.jpg","color_swatch":"linear-gradient(135deg,#C0C8D0,#E8F0F8,#FFFFFF)"},
  {"id":"ruby","name_ja":"ルビー","sg_min":3.95,"sg_max":4.1,"sg_std":4.0,"color_group":"red","description":"コランダムの赤色変種。最高級はミャンマー産ピジョンブラッド","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Corundum-gem7.jpg/320px-Corundum-gem7.jpg","color_swatch":"linear-gradient(135deg,#6B0000,#C0392B,#E74C3C)"},
  {"id":"sapphire","name_ja":"サファイア","sg_min":3.9,"sg_max":4.1,"sg_std":4.0,"color_group":"blue","description":"コランダムの青色変種。カシミール産が最高峰","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Sapphire_gem.jpg/320px-Sapphire_gem.jpg","color_swatch":"linear-gradient(135deg,#0A1545,#1565C0,#42A5F5)"},
  {"id":"emerald","name_ja":"エメラルド","sg_min":2.67,"sg_max":2.8,"sg_std":2.73,"color_group":"green","description":"最高級緑の宝石。コロンビア産ムゾー産が最高峰","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Emerald_gem.jpg/320px-Emerald_gem.jpg","color_swatch":"linear-gradient(135deg,#003A1A,#006B3A,#00A060)"},
  {"id":"aquamarine","name_ja":"アクアマリン","sg_min":2.68,"sg_max":2.8,"sg_std":2.74,"color_group":"blue","description":"海水のような澄んだ青。ベリルの青色変種","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Aquamarine_gem.jpg/320px-Aquamarine_gem.jpg","color_swatch":"linear-gradient(135deg,#004D7A,#0097C4,#00C8E0)"},
  {"id":"alexandrite","name_ja":"アレキサンドライト","sg_min":3.71,"sg_max":3.73,"sg_std":3.72,"color_group":"multi","description":"昼は緑、白熱灯下では赤に変色する奇跡の石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Alexandrite_gems.jpg/320px-Alexandrite_gems.jpg","color_swatch":"linear-gradient(135deg,#1A6A20,#308A30,#8B1A4A)"},
  {"id":"amethyst","name_ja":"アメジスト","sg_min":2.65,"sg_max":2.66,"sg_std":2.66,"color_group":"purple","description":"紫水晶。クォーツの紫色変種。古来から魔除けの石とされた","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Amethyst_gem.jpg/320px-Amethyst_gem.jpg","color_swatch":"linear-gradient(135deg,#3D0A6B,#7B1FA2,#AB47BC)"},
  {"id":"ametrine","name_ja":"アメトリン","sg_min":2.65,"sg_max":2.66,"sg_std":2.655,"color_group":"purple","description":"アメジストとシトリンが一石に共存。ボリビア産が有名","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Ametrine_gem.jpg/320px-Ametrine_gem.jpg","color_swatch":"linear-gradient(135deg,#5A1A7A,#9B4DCA,#E8C030)"},
  {"id":"andalusite","name_ja":"アンダルサイト","sg_min":3.13,"sg_max":3.21,"sg_std":3.17,"color_group":"brown","description":"強い多色性で赤・緑・黄が方向により見える","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Andalusite_gem.jpg/320px-Andalusite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A3A20,#9A6840,#C09060)"},
  {"id":"apatite","name_ja":"アパタイト","sg_min":3.17,"sg_max":3.23,"sg_std":3.2,"color_group":"blue","description":"ネオンブルーから黄緑まで。パライバトルマリンに似た発色も","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Apatite_gem.jpg/320px-Apatite_gem.jpg","color_swatch":"linear-gradient(135deg,#004A6A,#1080B0,#40C0E0)"},
  {"id":"amber","name_ja":"琥珀（アンバー）","sg_min":1.03,"sg_max":1.1,"sg_std":1.06,"color_group":"orange","description":"数千万年前の樹脂が化石化。内部に虫や植物が閉じ込まることも","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Amber_gem.jpg/320px-Amber_gem.jpg","color_swatch":"linear-gradient(135deg,#7A4000,#C07800,#E8A800)"},
  {"id":"axinite","name_ja":"アクシナイト","sg_min":3.27,"sg_max":3.35,"sg_std":3.29,"color_group":"brown","description":"褐色から紫、グレーまで。クサビ型の結晶が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Axinite_gem.jpg/320px-Axinite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A3A20,#8A6040,#B08868)"},
  {"id":"benitoite","name_ja":"ベニトアイト","sg_min":3.64,"sg_max":3.68,"sg_std":3.66,"color_group":"blue","description":"カリフォルニア州産の希少鉱物。強い蛍光と分散が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Benitoite_gem.jpg/320px-Benitoite_gem.jpg","color_swatch":"linear-gradient(135deg,#0A2080,#2040C0,#4080F0)"},
  {"id":"beryl","name_ja":"ベリル","sg_min":2.68,"sg_max":2.8,"sg_std":2.74,"color_group":"green","description":"ベリル族の総称。エメラルド・アクアマリン・モルガナイトの母石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Beryl.jpg/320px-Beryl.jpg","color_swatch":"linear-gradient(135deg,#2A6A40,#50AA70,#90D0A0)"},
  {"id":"brazilianite","name_ja":"ブラジリアナイト","sg_min":2.98,"sg_max":3.01,"sg_std":2.99,"color_group":"yellow","description":"鮮やかな黄緑色。ブラジル産の国石的存在","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Brazilianite_gem.jpg/320px-Brazilianite_gem.jpg","color_swatch":"linear-gradient(135deg,#4A7A00,#80C000,#B0E820)"},
  {"id":"carnelian","name_ja":"カーネリアン","sg_min":2.58,"sg_max":2.64,"sg_std":2.61,"color_group":"orange","description":"赤橙から橙のカルセドニー。古代から印鑑や護符に使われた","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Carnelian_gem.jpg/320px-Carnelian_gem.jpg","color_swatch":"linear-gradient(135deg,#7A2A00,#C05000,#E87828)"},
  {"id":"cassiterite","name_ja":"カッシテライト","sg_min":6.8,"sg_max":7.1,"sg_std":6.95,"color_group":"brown","description":"錫の酸化鉱物。強い分散でダイヤに近い輝き。希少コレクター石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Cassiterite_gem.jpg/320px-Cassiterite_gem.jpg","color_swatch":"linear-gradient(135deg,#3A2A10,#6A5020,#9A7840)"},
  {"id":"cat_eye_chrysoberyl","name_ja":"キャッツアイ（クリソベリル）","sg_min":3.71,"sg_max":3.73,"sg_std":3.72,"color_group":"yellow","description":"シャトヤンシー効果で猫目が浮かぶクリソベリル","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Chrysoberyl_cats_eye.jpg/320px-Chrysoberyl_cats_eye.jpg","color_swatch":"linear-gradient(135deg,#6A5A00,#AA9010,#D4C040)"},
  {"id":"chalcedony","name_ja":"カルセドニー","sg_min":2.58,"sg_max":2.62,"sg_std":2.6,"color_group":"colorless","description":"半透明の微細石英。青灰〜白。カルセドニーの総称でもある","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Chalcedony_gem.jpg/320px-Chalcedony_gem.jpg","color_swatch":"linear-gradient(135deg,#8090A8,#A8B8C8,#D0E0F0)"},
  {"id":"charoite","name_ja":"チャロアイト","sg_min":2.54,"sg_max":2.68,"sg_std":2.6,"color_group":"purple","description":"渦巻くような紫模様。シベリア産の単産鉱物","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Charoite_gem.jpg/320px-Charoite_gem.jpg","color_swatch":"linear-gradient(135deg,#3D0A5E,#6B1A9E,#9B4DCC)"},
  {"id":"chrome_diopside","name_ja":"クロムダイオプサイド","sg_min":3.27,"sg_max":3.38,"sg_std":3.29,"color_group":"green","description":"シベリア産の深みのある緑。エメラルドの代替としても使われる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Chrome_diopside_gem.jpg/320px-Chrome_diopside_gem.jpg","color_swatch":"linear-gradient(135deg,#0A3A10,#1A6A20,#309A40)"},
  {"id":"chrome_tourmaline","name_ja":"クロムトルマリン","sg_min":3.02,"sg_max":3.26,"sg_std":3.06,"color_group":"green","description":"クロムによる深い森緑色。タンザニア産が主産地","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Chrome_tourmaline.jpg/320px-Chrome_tourmaline.jpg","color_swatch":"linear-gradient(135deg,#0A3A0A,#1A6A1A,#309A30)"},
  {"id":"chrysoberyl","name_ja":"クリソベリル","sg_min":3.71,"sg_max":3.73,"sg_std":3.72,"color_group":"yellow","description":"クリソベリル。黄緑から黄色。アレキサンドライトとキャッツアイの母石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Chrysoberyl_gem.jpg/320px-Chrysoberyl_gem.jpg","color_swatch":"linear-gradient(135deg,#4A5A00,#8AA000,#C0D000)"},
  {"id":"chrysoprase","name_ja":"クリソプレーズ","sg_min":2.58,"sg_max":2.64,"sg_std":2.62,"color_group":"green","description":"ニッケルによる鮮やかなアップルグリーン。カルセドニーの一種","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Chrysoprase_gem.jpg/320px-Chrysoprase_gem.jpg","color_swatch":"linear-gradient(135deg,#1A5A20,#30A040,#60D060)"},
  {"id":"citrine","name_ja":"シトリン","sg_min":2.65,"sg_max":2.75,"sg_std":2.7,"color_group":"yellow","description":"黄色の水晶。アメジストの加熱処理品が多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Citrine_gem.jpg/320px-Citrine_gem.jpg","color_swatch":"linear-gradient(135deg,#7A5A00,#C09000,#E8C000)"},
  {"id":"clinohumite","name_ja":"クリノヒュマイト","sg_min":3.13,"sg_max":3.35,"sg_std":3.21,"color_group":"yellow","description":"シベリア産のオレンジ〜黄色。希少石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Clinohumite_gem.jpg/320px-Clinohumite_gem.jpg","color_swatch":"linear-gradient(135deg,#7A5A00,#C09020,#E8C040)"},
  {"id":"cobaltite","name_ja":"コバルタイト","sg_min":5.95,"sg_max":6.33,"sg_std":6.1,"color_group":"red","description":"コバルト砒化物。銀〜赤みがかった金属光沢","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Cobaltite_gem.jpg/320px-Cobaltite_gem.jpg","color_swatch":"linear-gradient(135deg,#4A1A2A,#8A3A4A,#C07080)"},
  {"id":"conch_pearl","name_ja":"コンクパール","sg_min":2.83,"sg_max":2.86,"sg_std":2.85,"color_group":"red","description":"巻貝から採れる天然パール。ピンク〜オレンジの炎模様が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Conch_pearl.jpg/320px-Conch_pearl.jpg","color_swatch":"linear-gradient(135deg,#C07878,#F4A0A0,#FFDDE1)"},
  {"id":"coral","name_ja":"珊瑚（コーラル）","sg_min":2.6,"sg_max":2.7,"sg_std":2.65,"color_group":"red","description":"海洋生物の骨格。血赤珊瑚は最高級品","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Red_coral_gem.jpg/320px-Red_coral_gem.jpg","color_swatch":"linear-gradient(135deg,#8B1A00,#D4380A,#FF6347)"},
  {"id":"cubic_zirconia_synth","name_ja":"キュービックジルコニア（合成）","sg_min":5.6,"sg_max":6.0,"sg_std":5.8,"color_group":"colorless","description":"酸化ジルコニウムの合成宝石。ダイヤの代替として広く流通","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/CubicZirconia.jpg/320px-CubicZirconia.jpg","color_swatch":"linear-gradient(135deg,#C8D0D8,#E8F0F8,#FFFFFF)"},
  {"id":"cuprite","name_ja":"キュープライト","sg_min":5.85,"sg_max":6.15,"sg_std":6.0,"color_group":"red","description":"深い赤の銅鉱石。希少なファセットカット石はコレクター垂涎","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Cuprite_gem.jpg/320px-Cuprite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A0A00,#9A1A10,#C83020)"},
  {"id":"danburite","name_ja":"ダンビュライト","sg_min":2.97,"sg_max":3.03,"sg_std":3.0,"color_group":"colorless","description":"無色から淡黄。強い輝きを持ちダイヤの代替にもなる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Danburite_gem.jpg/320px-Danburite_gem.jpg","color_swatch":"linear-gradient(135deg,#C8D0C0,#E8F0D8,#FAFFF0)"},
  {"id":"demantoid","name_ja":"デマントイドガーネット","sg_min":3.82,"sg_max":3.88,"sg_std":3.84,"color_group":"green","description":"最高輝度のガーネット。ホーテールインクルージョンが真正の証","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Demantoid_garnet.jpg/320px-Demantoid_garnet.jpg","color_swatch":"linear-gradient(135deg,#0A4A1A,#1A8A3A,#40C060)"},
  {"id":"diaspore","name_ja":"ダイアスポア（ザルタナイト）","sg_min":3.3,"sg_max":3.4,"sg_std":3.35,"color_group":"multi","description":"ザルタナイトとも。光源により緑〜ピンクパープルに変色するトルコ産鉱物","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Diaspore_gem.jpg/320px-Diaspore_gem.jpg","color_swatch":"linear-gradient(135deg,#3A6A40,#60A060,#C08080)"},
  {"id":"diopside","name_ja":"ダイオプサイド","sg_min":3.22,"sg_max":3.38,"sg_std":3.29,"color_group":"green","description":"クロムダイオプサイドとも重なる緑から白まで","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Diopside_gem.jpg/320px-Diopside_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#308A40,#60B060)"},
  {"id":"dumortierite","name_ja":"デュモルティエライト","sg_min":3.26,"sg_max":3.41,"sg_std":3.35,"color_group":"blue","description":"インクブルーから紫青。カボションや彫刻に使われる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Dumortierite_gem.jpg/320px-Dumortierite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A1060,#3020A0,#5040C0)"},
  {"id":"enstatite","name_ja":"エンスタタイト","sg_min":3.1,"sg_max":3.3,"sg_std":3.2,"color_group":"brown","description":"褐色から黒緑。スタールーチル状の内包物でキャッツアイ効果も","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/Enstatite_gem.jpg/320px-Enstatite_gem.jpg","color_swatch":"linear-gradient(135deg,#3A3020,#6A5A38,#9A8858)"},
  {"id":"epidote","name_ja":"エピドート","sg_min":3.25,"sg_max":3.5,"sg_std":3.38,"color_group":"green","description":"黄緑から暗緑。強い多色性で方向により色が大きく変化","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Epidote_gem.jpg/320px-Epidote_gem.jpg","color_swatch":"linear-gradient(135deg,#2A4010,#4A7020,#709040)"},
  {"id":"euclase","name_ja":"ユークレース","sg_min":2.99,"sg_max":3.1,"sg_std":3.05,"color_group":"blue","description":"青から緑がかった青。強い劈開を持つ希少石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Euclase_gem.jpg/320px-Euclase_gem.jpg","color_swatch":"linear-gradient(135deg,#2A5A8A,#4A8ABA,#80C0E8)"},
  {"id":"fabulite","name_ja":"ファビュライト（合成チタン酸ストロンチウム）","sg_min":5.1,"sg_max":5.13,"sg_std":5.12,"color_group":"colorless","description":"合成チタン酸ストロンチウム。強い分散でダイヤより虹色が強い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Strontium_titanate_gem.jpg/320px-Strontium_titanate_gem.jpg","color_swatch":"linear-gradient(135deg,#C0C8D0,#E0E8F0,#FFFFFF)"},
  {"id":"feldspar_sunstone","name_ja":"サンストーン（フェルドスパー）","sg_min":2.62,"sg_max":2.65,"sg_std":2.64,"color_group":"orange","description":"オレゴンサンストーン。コッパーインクルージョンで赤〜金に輝く","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Sunstone_gem.jpg/320px-Sunstone_gem.jpg","color_swatch":"linear-gradient(135deg,#8A5000,#C88020,#E8B040)"},
  {"id":"fire_agate","name_ja":"ファイアアゲート","sg_min":2.6,"sg_max":2.65,"sg_std":2.62,"color_group":"orange","description":"層状シリカによる干渉色で虹色の火花が輝く","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Fire_agate.jpg/320px-Fire_agate.jpg","color_swatch":"linear-gradient(135deg,#6A2000,#B04A10,#D07830)"},
  {"id":"fire_opal","name_ja":"ファイアオパール","sg_min":1.98,"sg_max":2.2,"sg_std":2.1,"color_group":"orange","description":"透明なオレンジ系オパール。遊色がなくても人気が高い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Fire_opal_gem.jpg/320px-Fire_opal_gem.jpg","color_swatch":"linear-gradient(135deg,#8B3A00,#D06000,#FF8C00)"},
  {"id":"fluorite","name_ja":"フローライト","sg_min":3.17,"sg_max":3.19,"sg_std":3.18,"color_group":"multi","description":"紫・緑・青・黄と最も多彩な色変化。蛍光現象の語源","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Fluorite_gem.jpg/320px-Fluorite_gem.jpg","color_swatch":"linear-gradient(135deg,#3A1A6A,#1A8A3A,#8A3AB8)"},
  {"id":"forsterite","name_ja":"フォルステライト","sg_min":3.21,"sg_max":3.26,"sg_std":3.23,"color_group":"colorless","description":"マグネシウムのオリビン。ペリドットの純粋な端成分","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Forsterite_gem.jpg/320px-Forsterite_gem.jpg","color_swatch":"linear-gradient(135deg,#C0C8B0,#E0E8C8,#F8FFF0)"},
  {"id":"garnet_almandine","name_ja":"アルマンディンガーネット","sg_min":3.93,"sg_max":4.3,"sg_std":4.05,"color_group":"red","description":"深みのある赤紫色。ガーネット族で最も流通量が多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Almandine_garnet.jpg/320px-Almandine_garnet.jpg","color_swatch":"linear-gradient(135deg,#4A0000,#8B0000,#C0392B)"},
  {"id":"garnet_grossular","name_ja":"グロッシュラーガーネット","sg_min":3.57,"sg_max":3.73,"sg_std":3.61,"color_group":"green","description":"グロッシュラーガーネット。無色から緑まで幅広い色","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Grossular_garnet.jpg/320px-Grossular_garnet.jpg","color_swatch":"linear-gradient(135deg,#2A5A20,#4A9A40,#70C060)"},
  {"id":"garnet_hessonite","name_ja":"ヘッソナイトガーネット","sg_min":3.57,"sg_max":3.73,"sg_std":3.61,"color_group":"orange","description":"オレンジブラウンのグロッシュラーガーネット。ヘッソナイト","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Hessonite_garnet.jpg/320px-Hessonite_garnet.jpg","color_swatch":"linear-gradient(135deg,#6A3800,#B06010,#D89040)"},
  {"id":"garnet_malaia","name_ja":"マライアガーネット","sg_min":3.72,"sg_max":3.87,"sg_std":3.78,"color_group":"red","description":"ピンクからオレンジピンク。東アフリカ産のハイブリッドガーネット","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Malaia_garnet.jpg/320px-Malaia_garnet.jpg","color_swatch":"linear-gradient(135deg,#8B2040,#D4406A,#FF6090)"},
  {"id":"garnet_mandarin","name_ja":"マンダリンガーネット（スペサルタイト）","sg_min":4.12,"sg_max":4.2,"sg_std":4.16,"color_group":"orange","description":"鮮烈なオレンジ。ナミビア産スペサルタイトの商品名","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Mandarin_garnet.jpg/320px-Mandarin_garnet.jpg","color_swatch":"linear-gradient(135deg,#8B4500,#D4690A,#FF8C00)"},
  {"id":"garnet_pyrope","name_ja":"パイロープガーネット","sg_min":3.65,"sg_max":3.87,"sg_std":3.78,"color_group":"red","description":"血のような深紅。炎を意味するギリシャ語が語源","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Pyrope_gem.jpg/320px-Pyrope_gem.jpg","color_swatch":"linear-gradient(135deg,#5A0000,#9B1B1B,#D32F2F)"},
  {"id":"garnet_rhodolite","name_ja":"ロードライトガーネット","sg_min":3.74,"sg_max":3.94,"sg_std":3.84,"color_group":"red","description":"ラズベリーピンクから紫みの赤。パイロープとアルマンディンの混晶","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Rhodolite_garnet.jpg/320px-Rhodolite_garnet.jpg","color_swatch":"linear-gradient(135deg,#6B1540,#A0286A,#C0478A)"},
  {"id":"garnet_spessartite","name_ja":"スペサルタイトガーネット","sg_min":3.97,"sg_max":4.27,"sg_std":4.15,"color_group":"orange","description":"オレンジから赤みオレンジ。蛍光感のある発色が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Spessartine_gem.jpg/320px-Spessartine_gem.jpg","color_swatch":"linear-gradient(135deg,#7B3A00,#C0610A,#E8820A)"},
  {"id":"garnet_tsavorite","name_ja":"ツァボライトガーネット","sg_min":3.57,"sg_max":3.73,"sg_std":3.61,"color_group":"green","description":"ケニア・タンザニア産の鮮緑グロッシュラーガーネット","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Tsavorite_garnet.jpg/320px-Tsavorite_garnet.jpg","color_swatch":"linear-gradient(135deg,#004A20,#008040,#00C060)"},
  {"id":"garnet_uvarovite","name_ja":"ウバロバイトガーネット","sg_min":3.4,"sg_max":3.6,"sg_std":3.5,"color_group":"green","description":"エメラルドグリーンの小粒結晶。単結晶カットは極めて稀","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/Uvarovite_garnet.jpg/320px-Uvarovite_garnet.jpg","color_swatch":"linear-gradient(135deg,#004A10,#008A30,#20C050)"},
  {"id":"gaspeite","name_ja":"ガスペアイト","sg_min":3.6,"sg_max":3.7,"sg_std":3.65,"color_group":"green","description":"アップルグリーンのニッケル炭酸塩。オーストラリア産","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Gaspeite_gem.jpg/320px-Gaspeite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A6A20,#50A040,#80D060)"},
  {"id":"goshenite","name_ja":"ゴッシェナイト（無色ベリル）","sg_min":2.68,"sg_max":2.8,"sg_std":2.74,"color_group":"colorless","description":"無色のベリル。宝石名はマサチューセッツ州ゴーシェンに由来","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Goshenite.jpg/320px-Goshenite.jpg","color_swatch":"linear-gradient(135deg,#C0C8D0,#DDE8F0,#F5FAFF)"},
  {"id":"heliodor","name_ja":"ヘリオドール（黄色ベリル）","sg_min":2.68,"sg_max":2.8,"sg_std":2.74,"color_group":"yellow","description":"黄金色のベリル。ヘリオスはギリシャ語で太陽の意","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Heliodor.jpg/320px-Heliodor.jpg","color_swatch":"linear-gradient(135deg,#6A5000,#B09000,#E0C820)"},
  {"id":"hematite","name_ja":"ヘマタイト","sg_min":4.95,"sg_max":5.2,"sg_std":5.08,"color_group":"black","description":"鉄鉱石の一種。金属光沢のある銀黒色。ビーズや彫刻に使われる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Hematite_gem.jpg/320px-Hematite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A1A1A,#3C3C3C,#606060)"},
  {"id":"hessonite","name_ja":"ヘッソナイト","sg_min":3.57,"sg_max":3.73,"sg_std":3.64,"color_group":"orange","description":"オレンジ〜茶のグロッシュラーガーネット","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Hessonite_garnet.jpg/320px-Hessonite_garnet.jpg","color_swatch":"linear-gradient(135deg,#6A3800,#B06010,#D89040)"},
  {"id":"hiddenite","name_ja":"ヒデナイト（緑スポジュメン）","sg_min":3.15,"sg_max":3.21,"sg_std":3.18,"color_group":"green","description":"クロムによる緑色のスポジュメン。エメラルドグリーン","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Hiddenite_gem.jpg/320px-Hiddenite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#308A40,#60B060)"},
  {"id":"howlite","name_ja":"ハウライト","sg_min":2.45,"sg_max":2.58,"sg_std":2.53,"color_group":"colorless","description":"白に灰色の静脈模様。ターコイズの着色代替に使われることも","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Howlite_gem.jpg/320px-Howlite_gem.jpg","color_swatch":"linear-gradient(135deg,#C0C0B8,#E0E0D8,#F8F8F0)"},
  {"id":"hypersthene","name_ja":"ハイパースシーン","sg_min":3.4,"sg_max":3.5,"sg_std":3.45,"color_group":"black","description":"金属光沢でシルバーの閃光が美しいシラーストーン","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Hypersthene_gem.jpg/320px-Hypersthene_gem.jpg","color_swatch":"linear-gradient(135deg,#2A2020,#4A3838,#706868)"},
  {"id":"idocrase","name_ja":"イドクレース（ベズビアナイト）","sg_min":3.32,"sg_max":3.47,"sg_std":3.4,"color_group":"green","description":"ヴェズビアナイトとも。黄緑から濃緑","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Vesuvianite_gem.jpg/320px-Vesuvianite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#309A40,#60C060)"},
  {"id":"iolite","name_ja":"アイオライト","sg_min":2.57,"sg_max":2.7,"sg_std":2.64,"color_group":"blue","description":"多色性が強く方向により青・紫・黄に変化。コンパス代わりに使われた","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Iolite_gem.jpg/320px-Iolite_gem.jpg","color_swatch":"linear-gradient(135deg,#1B1060,#3D2AA0,#6B52D0)"},
  {"id":"ivory","name_ja":"象牙（アイボリー）","sg_min":1.7,"sg_max":1.9,"sg_std":1.8,"color_group":"organic","description":"象牙。現在はワシントン条約で厳しく規制されている","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Ivory_gem.jpg/320px-Ivory_gem.jpg","color_swatch":"linear-gradient(135deg,#D8C8A0,#EDE0C0,#F8F0D8)"},
  {"id":"jadeite","name_ja":"ジェイダイト（翡翠）","sg_min":3.25,"sg_max":3.45,"sg_std":3.34,"color_group":"green","description":"翡翠の一種。帝王玉と呼ばれる深緑が最高級","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Jadeite_gem.jpg/320px-Jadeite_gem.jpg","color_swatch":"linear-gradient(135deg,#004030,#006B50,#009B70)"},
  {"id":"jasper","name_ja":"ジャスパー（碧玉）","sg_min":2.58,"sg_max":2.91,"sg_std":2.7,"color_group":"multi","description":"不透明な石英の一種。赤・黄・緑など多彩な色と模様","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Jasper_gem.jpg/320px-Jasper_gem.jpg","color_swatch":"linear-gradient(135deg,#8A3020,#C06040,#D09060)"},
  {"id":"jeremejevite","name_ja":"ジェレメイエブ石","sg_min":3.27,"sg_max":3.31,"sg_std":3.29,"color_group":"blue","description":"コーンフラワーブルーの超希少石。宝石品質は極めて稀","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Jeremejevite_gem.jpg/320px-Jeremejevite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A8A,#3070C0,#60A0F0)"},
  {"id":"jet","name_ja":"ジェット","sg_min":1.19,"sg_max":1.35,"sg_std":1.32,"color_group":"black","description":"古代の木が炭化した有機鉱物。ビクトリア朝の喪服宝石として有名","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Jet_gem.jpg/320px-Jet_gem.jpg","color_swatch":"linear-gradient(135deg,#0A0A0A,#1E1E1E,#333333)"},
  {"id":"kornerupine","name_ja":"コーネルピン","sg_min":3.27,"sg_max":3.45,"sg_std":3.32,"color_group":"green","description":"緑から褐色。強い多色性を示すコレクター向け石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Kornerupine_gem.jpg/320px-Kornerupine_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#2D8040,#60B060)"},
  {"id":"kunzite","name_ja":"クンツァイト（桃色スポジュメン）","sg_min":3.15,"sg_max":3.21,"sg_std":3.18,"color_group":"red","description":"淡いピンクから紫ピンク。スポジュメンのピンク変種","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Kunzite_gem.jpg/320px-Kunzite_gem.jpg","color_swatch":"linear-gradient(135deg,#7B3070,#C060A0,#E090C0)"},
  {"id":"kyanite","name_ja":"カイヤナイト","sg_min":3.53,"sg_max":3.7,"sg_std":3.61,"color_group":"blue","description":"刀のような柱状結晶。ブルーが最も一般的","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Kyanite_gem.jpg/320px-Kyanite_gem.jpg","color_swatch":"linear-gradient(135deg,#0C2A7A,#1E5AB5,#4D8FE0)"},
  {"id":"labradorite","name_ja":"ラブラドライト","sg_min":2.68,"sg_max":2.72,"sg_std":2.7,"color_group":"multi","description":"ラブラドレッセンス現象で青〜金に輝く。魔法の石とも呼ばれる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Labradorite_gem.jpg/320px-Labradorite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A2040,#2050A0,#60A0D0)"},
  {"id":"lapis_lazuli","name_ja":"ラピスラズリ","sg_min":2.7,"sg_max":2.9,"sg_std":2.8,"color_group":"blue","description":"深い瑠璃色に黄鉄鉱の金点が輝く。古代から顔料にも使われた","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Lapis_lazuli_gem.jpg/320px-Lapis_lazuli_gem.jpg","color_swatch":"linear-gradient(135deg,#0A1A5E,#1A3A9E,#2244C8)"},
  {"id":"larimar","name_ja":"ラリマー","sg_min":2.7,"sg_max":2.9,"sg_std":2.75,"color_group":"blue","description":"カリブ海のみに産する青い珪灰石。ドミニカ共和国の国石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Larimar_gem.jpg/320px-Larimar_gem.jpg","color_swatch":"linear-gradient(135deg,#1A7A8A,#40B0C0,#80D8E8)"},
  {"id":"lazulite","name_ja":"ラズライト","sg_min":3.06,"sg_max":3.34,"sg_std":3.12,"color_group":"blue","description":"ラピスラズリに似た深い青。マトリックスカボションが多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Lazulite_gem.jpg/320px-Lazulite_gem.jpg","color_swatch":"linear-gradient(135deg,#0A2060,#1A4090,#3060B0)"},
  {"id":"lepidolite","name_ja":"レピドライト","sg_min":2.8,"sg_max":3.0,"sg_std":2.9,"color_group":"purple","description":"ライラックから淡紫。雲母の一種でリチウムを含む","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Lepidolite_gem.jpg/320px-Lepidolite_gem.jpg","color_swatch":"linear-gradient(135deg,#6B4A7B,#A07AB5,#C8A8D8)"},
  {"id":"malachite","name_ja":"マラカイト","sg_min":3.74,"sg_max":3.95,"sg_std":3.85,"color_group":"green","description":"縞模様が美しい緑銅鉱。カボションと彫刻作品が多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Malachite_gem.jpg/320px-Malachite_gem.jpg","color_swatch":"linear-gradient(135deg,#004A10,#007A30,#20B050)"},
  {"id":"moldavite","name_ja":"モルダバイト","sg_min":2.32,"sg_max":2.46,"sg_std":2.4,"color_group":"green","description":"隕石衝突で生成された天然ガラス。深い瓶緑が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Moldavite_gem.jpg/320px-Moldavite_gem.jpg","color_swatch":"linear-gradient(135deg,#0A3010,#1A6020,#30902A)"},
  {"id":"moonstone","name_ja":"ムーンストーン","sg_min":2.56,"sg_max":2.6,"sg_std":2.58,"color_group":"colorless","description":"アデュラレッセンス効果で月光のような青白い光が浮かぶ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Moonstone_gem.jpg/320px-Moonstone_gem.jpg","color_swatch":"linear-gradient(135deg,#8090A8,#B0C0D8,#E8F0FF)"},
  {"id":"morganite","name_ja":"モルガナイト（桃色ベリル）","sg_min":2.71,"sg_max":2.9,"sg_std":2.8,"color_group":"red","description":"桃色のベリル。ピーチからサーモンピンクが人気","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Morganite.jpg/320px-Morganite.jpg","color_swatch":"linear-gradient(135deg,#8B3A5A,#D4748A,#FFAAB5)"},
  {"id":"musgravite","name_ja":"マスグラバイト","sg_min":3.64,"sg_max":3.67,"sg_std":3.66,"color_group":"purple","description":"世界で数十石しか確認されていない最希少鉱物の一つ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Musgravite_gem.jpg/320px-Musgravite_gem.jpg","color_swatch":"linear-gradient(135deg,#3A1A5A,#6A3A9A,#9A6ACC)"},
  {"id":"nephrite","name_ja":"ネフライト","sg_min":2.9,"sg_max":3.1,"sg_std":2.98,"color_group":"green","description":"ネフライト翡翠。羊脂玉（白）から菠菜玉（濃緑）まで","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Nephrite_gem.jpg/320px-Nephrite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A2A,#2D7A4A,#50A070)"},
  {"id":"obsidian","name_ja":"黒曜石（オブシディアン）","sg_min":2.35,"sg_max":2.6,"sg_std":2.4,"color_group":"black","description":"火山性ガラス。虹色の光沢が特徴","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Obsidian_gem.jpg/320px-Obsidian_gem.jpg","color_swatch":"linear-gradient(135deg,#0A0A10,#1A1A22,#2E2E3E)"},
  {"id":"onyx","name_ja":"オニキス","sg_min":2.58,"sg_max":2.62,"sg_std":2.6,"color_group":"black","description":"黒いカルセドニー。縞模様のサードオニキスも同族","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Onyx_gem.jpg/320px-Onyx_gem.jpg","color_swatch":"linear-gradient(135deg,#0A0A0A,#202020,#383838)"},
  {"id":"opal_black","name_ja":"ブラックオパール","sg_min":1.98,"sg_max":2.2,"sg_std":2.15,"color_group":"black","description":"暗い地色に鮮やかな遊色が輝く。ライトニングリッジ産が最高峰","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Black_opal.jpg/320px-Black_opal.jpg","color_swatch":"linear-gradient(135deg,#0A0A15,#1A1A30,#FF4444)"},
  {"id":"opal_boulder","name_ja":"ボルダーオパール","sg_min":2.55,"sg_max":2.65,"sg_std":2.6,"color_group":"multi","description":"鉄石英の母岩付き。自然な形と遊色が個性的","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Boulder_opal.jpg/320px-Boulder_opal.jpg","color_swatch":"linear-gradient(135deg,#3A2A10,#D06030,#40A0E0)"},
  {"id":"opal_crystal","name_ja":"クリスタルオパール","sg_min":2.08,"sg_max":2.15,"sg_std":2.1,"color_group":"multi","description":"透明な地色に鮮明な遊色。地色がないため色がより鮮やか","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Crystal_opal.jpg/320px-Crystal_opal.jpg","color_swatch":"linear-gradient(135deg,#D0E8F8,#E8F8FF,#FFE8F0)"},
  {"id":"opal_white","name_ja":"ホワイトオパール","sg_min":1.98,"sg_max":2.2,"sg_std":2.08,"color_group":"multi","description":"白地に虹色の遊色が輝く。最も一般的なオパール","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/White_opal.jpg/320px-White_opal.jpg","color_swatch":"linear-gradient(135deg,#D0D0D8,#E8E8FF,#FFD0D8)"},
  {"id":"orthoclase","name_ja":"オーソクレース","sg_min":2.55,"sg_max":2.63,"sg_std":2.57,"color_group":"yellow","description":"黄色の透明長石。マダガスカル産が最上質のカット石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Orthoclase_gem.jpg/320px-Orthoclase_gem.jpg","color_swatch":"linear-gradient(135deg,#9A8A40,#C8B860,#E8D880)"},
  {"id":"painite","name_ja":"ペイナイト","sg_min":4.0,"sg_max":4.04,"sg_std":4.01,"color_group":"red","description":"一時期世界最希少鉱物。ミャンマー産の暗赤〜茶","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Painite_gem.jpg/320px-Painite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A1010,#9A3020,#C06040)"},
  {"id":"pearl","name_ja":"真珠（パール）","sg_min":2.6,"sg_max":2.78,"sg_std":2.69,"color_group":"colorless","description":"貝が生み出す有機宝石。白から黒まで多彩なオリエントを持つ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Pearl_gem.jpg/320px-Pearl_gem.jpg","color_swatch":"linear-gradient(135deg,#B8B8C0,#D8D8E0,#F8F8FF)"},
  {"id":"pearl_mabe","name_ja":"マベパール","sg_min":2.6,"sg_max":2.78,"sg_std":2.69,"color_group":"colorless","description":"マベパール。貝殻に密着した半球形の養殖真珠","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Mabe_pearl.jpg/320px-Mabe_pearl.jpg","color_swatch":"linear-gradient(135deg,#B0B8C8,#D0D8E8,#F0F8FF)"},
  {"id":"peridot","name_ja":"ペリドット","sg_min":3.27,"sg_max":3.48,"sg_std":3.34,"color_group":"green","description":"黄緑色のオリビン。鉄含有量により色が変化する","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Peridot_gem.jpg/320px-Peridot_gem.jpg","color_swatch":"linear-gradient(135deg,#3A5A00,#6BA000,#9AD000)"},
  {"id":"phenakite","name_ja":"フェナカイト","sg_min":2.93,"sg_max":2.97,"sg_std":2.95,"color_group":"colorless","description":"ベリリウムの珪酸塩。強い輝きを持つ希少なコレクター石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Phenakite_gem.jpg/320px-Phenakite_gem.jpg","color_swatch":"linear-gradient(135deg,#C0C8D0,#E0E8F0,#FAFCFF)"},
  {"id":"pietersite","name_ja":"ピータサイト","sg_min":2.6,"sg_max":2.65,"sg_std":2.61,"color_group":"blue","description":"タイガーアイが変成したもの。嵐の石とも呼ばれる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Pietersite_gem.jpg/320px-Pietersite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A2040,#2A4080,#6080C0)"},
  {"id":"prasiolite","name_ja":"プラシオライト（緑アメジスト）","sg_min":2.65,"sg_max":2.66,"sg_std":2.66,"color_group":"green","description":"アメジストの加熱処理品。淡い黄緑色","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/Prasiolite.jpg/320px-Prasiolite.jpg","color_swatch":"linear-gradient(135deg,#3A5A30,#60A050,#90C878)"},
  {"id":"prehnite","name_ja":"プレナイト","sg_min":2.8,"sg_max":2.95,"sg_std":2.87,"color_group":"green","description":"ミントグリーンから黄緑。「癒しの石」として人気","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Prehnite_gem.jpg/320px-Prehnite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A5030,#4A8A50,#80B878)"},
  {"id":"pyrite","name_ja":"パイライト（黄鉄鉱）","sg_min":4.9,"sg_max":5.2,"sg_std":5.02,"color_group":"yellow","description":"愚者の金。黄金色の金属光沢。スペインなど産地が多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Pyrite_gem.jpg/320px-Pyrite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A5000,#9A8800,#C8B800)"},
  {"id":"pyromorphite","name_ja":"パイロモルファイト","sg_min":6.5,"sg_max":7.1,"sg_std":6.9,"color_group":"green","description":"燐酸鉛鉱物。六角柱の結晶。緑・黄・褐色","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Pyromorphite_gem.jpg/320px-Pyromorphite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A5A10,#50A030,#80D050)"},
  {"id":"quartz","name_ja":"クオーツ（水晶）","sg_min":2.65,"sg_max":2.66,"sg_std":2.66,"color_group":"colorless","description":"水晶。最も産出量が多い鉱物の一つ。完全な透明度を持つ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Quartz_gem.jpg/320px-Quartz_gem.jpg","color_swatch":"linear-gradient(135deg,#B8C0C8,#D8E0E8,#F0F8FF)"},
  {"id":"rhodochrosite","name_ja":"ロードクロサイト（インカローズ）","sg_min":3.45,"sg_max":3.7,"sg_std":3.6,"color_group":"red","description":"鮮やかなバラ色。インカの王族の石とも呼ばれる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Rhodochrosite_gem.jpg/320px-Rhodochrosite_gem.jpg","color_swatch":"linear-gradient(135deg,#8B1A4A,#E91E8C,#F48FB1)"},
  {"id":"rhodolite","name_ja":"ロードライト","sg_min":3.74,"sg_max":3.94,"sg_std":3.84,"color_group":"red","description":"ラズベリーピンクから紫赤。ロードライトガーネットの単独エントリ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Rhodolite_garnet.jpg/320px-Rhodolite_garnet.jpg","color_swatch":"linear-gradient(135deg,#6B1540,#A0286A,#C0478A)"},
  {"id":"rhodonite","name_ja":"ロードナイト","sg_min":3.4,"sg_max":3.74,"sg_std":3.6,"color_group":"red","description":"黒いマンガン模様が入るピンク〜赤。カボションで多く使われる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Rhodonite_gem.jpg/320px-Rhodonite_gem.jpg","color_swatch":"linear-gradient(135deg,#7B2D3A,#C0556A,#E57383)"},
  {"id":"rose_quartz","name_ja":"ローズクォーツ","sg_min":2.65,"sg_max":2.66,"sg_std":2.66,"color_group":"red","description":"淡いピンクの石英。愛と美のシンボルとして世界中で人気","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Rose_quartz_gem.jpg/320px-Rose_quartz_gem.jpg","color_swatch":"linear-gradient(135deg,#8B4A5A,#C07888,#E8A8B8)"},
  {"id":"rubellite","name_ja":"ルベライト（赤トルマリン）","sg_min":3.01,"sg_max":3.26,"sg_std":3.05,"color_group":"red","description":"ルビーに似た深みのある赤から赤紫。トルマリンの仲間","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Rubellite_gem.jpg/320px-Rubellite_gem.jpg","color_swatch":"linear-gradient(135deg,#7B1025,#B71C4C,#E91E8C)"},
  {"id":"rutile","name_ja":"ルチル（合成スタールーチル）","sg_min":4.23,"sg_max":4.3,"sg_std":4.25,"color_group":"orange","description":"合成ルチル（スタールーチル）は強い分散を持つ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/Rutile_gem.jpg/320px-Rutile_gem.jpg","color_swatch":"linear-gradient(135deg,#7A4000,#C07020,#E0A040)"},
  {"id":"rutilated_quartz","name_ja":"ルチルクォーツ","sg_min":2.65,"sg_max":2.7,"sg_std":2.68,"color_group":"multi","description":"金色または赤銅色のルチル針が内包した水晶","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Rutilated_quartz_gem.jpg/320px-Rutilated_quartz_gem.jpg","color_swatch":"linear-gradient(135deg,#B8A860,#D8C880,#E8D890)"},
  {"id":"sapphire_padparadscha","name_ja":"パパラチアサファイア","sg_min":3.95,"sg_max":4.05,"sg_std":4.0,"color_group":"orange","description":"ピンクとオレンジの中間色。蓮の花の色に由来するサファイア","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Padparadscha.jpg/320px-Padparadscha.jpg","color_swatch":"linear-gradient(135deg,#8B4530,#D4886A,#FFB090)"},
  {"id":"sapphire_star","name_ja":"スターサファイア","sg_min":3.95,"sg_max":4.05,"sg_std":4.0,"color_group":"blue","description":"スタールビー同様の星効果を持つサファイア","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Star_sapphire_gem.jpg/320px-Star_sapphire_gem.jpg","color_swatch":"linear-gradient(135deg,#0A1545,#1565C0,#5C9BE6)"},
  {"id":"scapolite","name_ja":"スカポライト","sg_min":2.57,"sg_max":2.74,"sg_std":2.67,"color_group":"yellow","description":"黄色から紫まで。キャッツアイ効果を示す標本もある","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Scapolite_gem.jpg/320px-Scapolite_gem.jpg","color_swatch":"linear-gradient(135deg,#7A7A00,#C0B800,#E8E020)"},
  {"id":"shell_cameo","name_ja":"シェル・カメオ","sg_min":1.47,"sg_max":1.52,"sg_std":1.5,"color_group":"colorless","description":"貝殻を彫刻したカメオ。白と橙のコントラストが美しい","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Shell_cameo.jpg/320px-Shell_cameo.jpg","color_swatch":"linear-gradient(135deg,#C8B090,#E8D0A8,#FFF0D8)"},
  {"id":"sinhalite","name_ja":"シンハライト","sg_min":3.47,"sg_max":3.5,"sg_std":3.48,"color_group":"brown","description":"セイロン（スリランカ）産の希少石。黄褐色から緑がかった茶","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Sinhalite_gem.jpg/320px-Sinhalite_gem.jpg","color_swatch":"linear-gradient(135deg,#5A4820,#8A7840,#B0A060)"},
  {"id":"smithsonite","name_ja":"スミソナイト","sg_min":4.3,"sg_max":4.45,"sg_std":4.35,"color_group":"blue","description":"亜鉛の炭酸塩。青から緑、ピンクと変化に富む","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Smithsonite_gem.jpg/320px-Smithsonite_gem.jpg","color_swatch":"linear-gradient(135deg,#205050,#408080,#70C0C0)"},
  {"id":"sodalite","name_ja":"ソーダライト","sg_min":2.14,"sg_max":2.4,"sg_std":2.27,"color_group":"blue","description":"深いコバルトブルー。白い方解石脈が特徴的","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Sodalite_gem.jpg/320px-Sodalite_gem.jpg","color_swatch":"linear-gradient(135deg,#0A1A6B,#1A3AA0,#2255C8)"},
  {"id":"sphalerite","name_ja":"スファレライト","sg_min":3.9,"sg_max":4.1,"sg_std":4.05,"color_group":"black","description":"亜鉛の硫化鉱物。強い分散でダイヤを超えるファイアを持つ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Sphalerite_gem.jpg/320px-Sphalerite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A1A0A,#5A3A18,#8A6030)"},
  {"id":"sphene","name_ja":"スフェーン（チタナイト）","sg_min":3.48,"sg_max":3.6,"sg_std":3.52,"color_group":"yellow","description":"チタナイトとも。強い分散でダイヤに匹敵する虹色ファイア","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Sphene_titanite.jpg/320px-Sphene_titanite.jpg","color_swatch":"linear-gradient(135deg,#5A5A00,#A0A000,#D0C020)"},
  {"id":"spinel","name_ja":"スピネル","sg_min":3.57,"sg_max":4.06,"sg_std":3.6,"color_group":"red","description":"長年ルビーと混同された希少な赤。無処理が多くコレクター人気が高い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Red_spinel.jpg/320px-Red_spinel.jpg","color_swatch":"linear-gradient(135deg,#6B0020,#B71C3C,#FF4081)"},
  {"id":"spinel_blue","name_ja":"ブルースピネル","sg_min":3.57,"sg_max":4.06,"sg_std":3.6,"color_group":"blue","description":"コバルトブルーから青紫。希少性が高くサファイアとも区別される","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Blue_spinel_gem.jpg/320px-Blue_spinel_gem.jpg","color_swatch":"linear-gradient(135deg,#0D1B5E,#1565C0,#42A5F5)"},
  {"id":"spodumene","name_ja":"スポジュメン","sg_min":3.15,"sg_max":3.21,"sg_std":3.18,"color_group":"purple","description":"クンツァイト（ピンク）ヒデナイト（緑）の総称","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Kunzite_gem.jpg/320px-Kunzite_gem.jpg","color_swatch":"linear-gradient(135deg,#7B3070,#C060A0,#E090C0)"},
  {"id":"star_ruby","name_ja":"スタールビー","sg_min":3.95,"sg_max":4.1,"sg_std":4.0,"color_group":"red","description":"シルク状内包物によるスター効果。光の下で六条の星が浮かぶ","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Star_ruby.jpg/320px-Star_ruby.jpg","color_swatch":"linear-gradient(135deg,#6B0000,#B71C1C,#E53935)"},
  {"id":"staurolite","name_ja":"スタウロライト","sg_min":3.65,"sg_max":3.83,"sg_std":3.74,"color_group":"brown","description":"十字型の双晶が有名。妖精の涙とも呼ばれるお守り石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Staurolite_gem.jpg/320px-Staurolite_gem.jpg","color_swatch":"linear-gradient(135deg,#4A3010,#7A5828,#A08050)"},
  {"id":"sugilite","name_ja":"スギライト","sg_min":2.74,"sg_max":2.8,"sg_std":2.76,"color_group":"purple","description":"鮮やかなマゼンタ紫。南アフリカ産が最も高品質","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Sugilite_gem.jpg/320px-Sugilite_gem.jpg","color_swatch":"linear-gradient(135deg,#4A0A6B,#8B1FAA,#BB55DD)"},
  {"id":"sunstone","name_ja":"サンストーン","sg_min":2.62,"sg_max":2.65,"sg_std":2.64,"color_group":"orange","description":"アベンチュレッセンス効果で金属的な輝き。長石の一種","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Sunstone_gem.jpg/320px-Sunstone_gem.jpg","color_swatch":"linear-gradient(135deg,#8A5000,#C88020,#E8B040)"},
  {"id":"tanzanite","name_ja":"タンザナイト","sg_min":3.35,"sg_max":3.45,"sg_std":3.35,"color_group":"blue","description":"タンザニア産のゾイサイト。ブルーとバイオレットに変色する希少石","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Tanzanite_gem.jpg/320px-Tanzanite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A0A5E,#4A2AB5,#7C5CE0)"},
  {"id":"tiger_eye","name_ja":"タイガーアイ","sg_min":2.6,"sg_max":2.65,"sg_std":2.64,"color_group":"brown","description":"ゴールドと茶が縞模様に交差。光で猫目効果が現れる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Tiger_eye_gem.jpg/320px-Tiger_eye_gem.jpg","color_swatch":"linear-gradient(135deg,#5A3000,#9A6010,#C89030)"},
  {"id":"topaz","name_ja":"トパーズ","sg_min":3.49,"sg_max":3.57,"sg_std":3.53,"color_group":"yellow","description":"無色・青・ピンク・インペリアルオレンジと多彩な色相","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Topaz_gem.jpg/320px-Topaz_gem.jpg","color_swatch":"linear-gradient(135deg,#7A5A20,#C09040,#E8C060)"},
  {"id":"topaz_imperial","name_ja":"インペリアルトパーズ","sg_min":3.49,"sg_max":3.57,"sg_std":3.53,"color_group":"orange","description":"オレンジから赤みオレンジのトパーズ。ブラジル産が最上質","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Imperial_topaz.jpg/320px-Imperial_topaz.jpg","color_swatch":"linear-gradient(135deg,#7A3A00,#C06820,#E89840)"},
  {"id":"tourmaline","name_ja":"トルマリン","sg_min":2.9,"sg_max":3.26,"sg_std":3.05,"color_group":"multi","description":"トルマリンの総称。赤・緑・青・無色など最も色の多い宝石族","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Tourmaline_gem.jpg/320px-Tourmaline_gem.jpg","color_swatch":"linear-gradient(135deg,#8B1A1A,#1A8B1A,#1A1A8B)"},
  {"id":"tourmaline_blue","name_ja":"ブルートルマリン（インディコライト）","sg_min":3.02,"sg_max":3.26,"sg_std":3.09,"color_group":"blue","description":"インディゴブルーから青緑。インディコライトとも呼ばれる","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Indicolite_tourmaline.jpg/320px-Indicolite_tourmaline.jpg","color_swatch":"linear-gradient(135deg,#003050,#0066AA,#4499DD)"},
  {"id":"tourmaline_green","name_ja":"グリーントルマリン（ヴェルデライト）","sg_min":3.02,"sg_max":3.26,"sg_std":3.07,"color_group":"green","description":"ヴェルデライト。鮮やかな緑から黄緑。ブラジル産が有名","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Green_tourmaline.jpg/320px-Green_tourmaline.jpg","color_swatch":"linear-gradient(135deg,#0A4A0A,#1A8A1A,#40C040)"},
  {"id":"tourmaline_paraiba","name_ja":"パライバトルマリン","sg_min":2.9,"sg_max":3.1,"sg_std":3.0,"color_group":"blue","description":"ネオンブルーから青緑。銅由来の発色で最高値のトルマリン","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Paraiba_tourmaline.jpg/320px-Paraiba_tourmaline.jpg","color_swatch":"linear-gradient(135deg,#004A5E,#00A0C0,#00D4E8)"},
  {"id":"tourmaline_watermelon","name_ja":"ウォーターメロントルマリン","sg_min":3.02,"sg_max":3.26,"sg_std":3.05,"color_group":"multi","description":"断面がスイカのように緑と赤に分かれる。スライスで販売されることも","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Watermelon_tourmaline.jpg/320px-Watermelon_tourmaline.jpg","color_swatch":"linear-gradient(135deg,#007A20,#70B060,#E03050)"},
  {"id":"tremolite","name_ja":"トレモライト","sg_min":2.98,"sg_max":3.1,"sg_std":3.0,"color_group":"colorless","description":"白〜灰色の角閃石。透明なカット石は希少なコレクター向け","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Tremolite_gem.jpg/320px-Tremolite_gem.jpg","color_swatch":"linear-gradient(135deg,#A0A898,#C8D0C0,#E8F0E0)"},
  {"id":"tsavorite","name_ja":"ツァボライト","sg_min":3.57,"sg_max":3.73,"sg_std":3.61,"color_group":"green","description":"ツァボライト。鮮やかな緑のグロッシュラーガーネット","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Tsavorite_garnet.jpg/320px-Tsavorite_garnet.jpg","color_swatch":"linear-gradient(135deg,#004A20,#008040,#00C060)"},
  {"id":"turquoise","name_ja":"トルコ石（ターコイズ）","sg_min":2.6,"sg_max":2.9,"sg_std":2.75,"color_group":"blue","description":"スカイブルーからグリーンブルー。古来から神聖視されてきた","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Turquoise_gem.jpg/320px-Turquoise_gem.jpg","color_swatch":"linear-gradient(135deg,#006B6B,#00A0A0,#48CAC8)"},
  {"id":"unakite","name_ja":"ユナカイト","sg_min":2.85,"sg_max":3.2,"sg_std":3.03,"color_group":"green","description":"ピンクの長石と緑のエピドートが混在。ユニークな模様","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Unakite_gem.jpg/320px-Unakite_gem.jpg","color_swatch":"linear-gradient(135deg,#3A4A20,#C07060,#A09040)"},
  {"id":"variscite","name_ja":"バリシャイト","sg_min":2.42,"sg_max":2.58,"sg_std":2.5,"color_group":"multi","description":"ミントグリーンから青緑。ターコイズと混同されることが多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Variscite_gem.jpg/320px-Variscite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A5A3A,#40908A,#70C0A0)"},
  {"id":"vesuvianite","name_ja":"ヴェスヴィアナイト","sg_min":3.32,"sg_max":3.47,"sg_std":3.4,"color_group":"green","description":"ヴェスヴィアナイト。黄緑から濃緑のカボションが多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Vesuvianite_gem.jpg/320px-Vesuvianite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#309A40,#60C060)"},
  {"id":"vivianite","name_ja":"ヴィビアナイト","sg_min":2.67,"sg_max":2.71,"sg_std":2.69,"color_group":"blue","description":"深い青緑から青。光に当たると色が増す稀少な鉱物","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Vivianite_gem.jpg/320px-Vivianite_gem.jpg","color_swatch":"linear-gradient(135deg,#0A3050,#1A6090,#30A0C0)"},
  {"id":"wardite","name_ja":"ワーダイト","sg_min":2.81,"sg_max":2.87,"sg_std":2.84,"color_group":"blue","description":"淡い青緑の希少リン酸塩。カボションで使われることが多い","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Wardite_gem.jpg/320px-Wardite_gem.jpg","color_swatch":"linear-gradient(135deg,#2A5A5A,#408888,#70B8B0)"},
  {"id":"williamsite","name_ja":"ウィリアムサイト（緑蛇紋石）","sg_min":2.5,"sg_max":2.62,"sg_std":2.55,"color_group":"green","description":"オイルグリーンの蛇紋石。翡翠の代替として流通","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Serpentine_gem.jpg/320px-Serpentine_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A20,#309A40,#50B060)"},
  {"id":"willemite","name_ja":"ウィレマイト","sg_min":3.89,"sg_max":4.18,"sg_std":3.99,"color_group":"green","description":"強蛍光緑が有名。ニュージャージー産が代表的","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Willemite_gem.jpg/320px-Willemite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A5A10,#30A020,#60D040)"},
  {"id":"zircon_blue","name_ja":"ブルージルコン","sg_min":4.6,"sg_max":4.8,"sg_std":4.7,"color_group":"blue","description":"強い輝きと分散。加熱処理によるブルーが流通の主体","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Blue_zircon_gem.jpg/320px-Blue_zircon_gem.jpg","color_swatch":"linear-gradient(135deg,#003060,#0060C0,#3090F0)"},
  {"id":"zircon_colorless","name_ja":"カラーレスジルコン","sg_min":4.6,"sg_max":4.8,"sg_std":4.7,"color_group":"colorless","description":"天然ジルコン。高い屈折率と分散でダイヤに最も近い輝き","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Colorless_zircon_gem.jpg/320px-Colorless_zircon_gem.jpg","color_swatch":"linear-gradient(135deg,#B8C8D8,#D8E8F0,#F8FEFF)"},
  {"id":"zircon_orange","name_ja":"オレンジジルコン（ヒヤシンス）","sg_min":4.6,"sg_max":4.8,"sg_std":4.69,"color_group":"orange","description":"ヒヤシンス色のジルコン。天然のオレンジ〜赤橙","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Orange_zircon_gem.jpg/320px-Orange_zircon_gem.jpg","color_swatch":"linear-gradient(135deg,#7A3000,#C06000,#E88828)"},
  {"id":"zircon_red","name_ja":"レッドジルコン","sg_min":4.6,"sg_max":4.8,"sg_std":4.7,"color_group":"red","description":"天然の赤〜赤橙ジルコン。加熱前の原色","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Red_zircon_gem.jpg/320px-Red_zircon_gem.jpg","color_swatch":"linear-gradient(135deg,#6A1A00,#AA3010,#D86030)"},
  {"id":"zoisite","name_ja":"ゾイサイト","sg_min":3.1,"sg_max":3.38,"sg_std":3.35,"color_group":"blue","description":"タンザナイトの母石属。緑色のゾイサイトはルビー混入品も","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Tanzanite_gem.jpg/320px-Tanzanite_gem.jpg","color_swatch":"linear-gradient(135deg,#1A4A6A,#308AAA,#60C0D8)"}
];

const COLOR_GROUPS = [
  {id:'all',     label:'すべて',     swatch:'linear-gradient(135deg,#8B1A1A,#1A8B3A,#1A3A8B,#8B8B1A)',emoji:'✦'},
  {id:'red',     label:'赤・ピンク', swatch:'linear-gradient(135deg,#6B0020,#C0392B,#FF6090)',emoji:''},
  {id:'blue',    label:'青・水色',   swatch:'linear-gradient(135deg,#0A1545,#1565C0,#42A5F5)',emoji:''},
  {id:'purple',  label:'紫',         swatch:'linear-gradient(135deg,#3D0A6B,#7B1FA2,#AB47BC)',emoji:''},
  {id:'green',   label:'緑',         swatch:'linear-gradient(135deg,#003A1A,#006B3A,#40C060)',emoji:''},
  {id:'yellow',  label:'黄・緑黄',   swatch:'linear-gradient(135deg,#5A5A00,#A0A000,#D0C020)',emoji:''},
  {id:'orange',  label:'橙・茶橙',   swatch:'linear-gradient(135deg,#7A3A00,#C06000,#E8A000)',emoji:''},
  {id:'brown',   label:'茶・褐色',   swatch:'linear-gradient(135deg,#3A2A10,#6A5020,#9A7840)',emoji:''},
  {id:'colorless',label:'無色・白',  swatch:'linear-gradient(135deg,#B0B8C8,#D8E0F0,#FFFFFF)',emoji:''},
  {id:'black',   label:'黒・グレー', swatch:'linear-gradient(135deg,#0A0A0A,#303030,#606060)',emoji:''},
  {id:'multi',   label:'多色・変色', swatch:'linear-gradient(135deg,#C03030,#30C030,#3030C0,#C0C030)',emoji:''},
  {id:'organic', label:'有機・特殊', swatch:'linear-gradient(135deg,#5A3000,#9A5800,#C0A060)',emoji:''},
];

const CUTS = [
  {id:'round_brilliant',name_ja:'ラウンド',model:'round',measurement_fields:['d','D'],correction_factor:0.985,group:'facet_round'},
  {id:'oval',name_ja:'オーバル',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.972,group:'facet_round'},
  {id:'cushion',name_ja:'クッション',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.965,group:'facet_round'},
  {id:'antique_cushion',name_ja:'アンティーク\nクッション',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.963,group:'facet_round'},
  {id:'marquise',name_ja:'マーキス',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.949,group:'facet_round'},
  {id:'pear',name_ja:'ペアシェイプ',model:'pear',measurement_fields:['L','W','D','split_ratio'],correction_factor:0.951,group:'facet_round'},
  {id:'heart',name_ja:'ハート',model:'pear',measurement_fields:['L','W','D'],correction_factor:0.952,group:'facet_round'},
  {id:'trilliant',name_ja:'トリリアント',model:'trilliant',measurement_fields:['A','D'],correction_factor:0.960,group:'facet_round'},
  {id:'princess',name_ja:'プリンセス',model:'prism_box_square',measurement_fields:['a','D'],correction_factor:0.992,group:'facet_step'},
  {id:'square',name_ja:'スクエア',model:'prism_box_square',measurement_fields:['a','D'],correction_factor:0.993,group:'facet_step'},
  {id:'emerald',name_ja:'エメラルド',model:'prism_box',measurement_fields:['L','W','D'],correction_factor:0.953,group:'facet_step'},
  {id:'octagon',name_ja:'オクタゴン',model:'prism_box',measurement_fields:['L','W','D'],correction_factor:0.980,group:'facet_step'},
  {id:'baguette',name_ja:'バゲット',model:'prism_box',measurement_fields:['L','W','D'],correction_factor:1.000,group:'facet_step'},
  {id:'mirror',name_ja:'ミラー',model:'prism_box',measurement_fields:['L','W','D'],correction_factor:0.977,group:'facet_step'},
  {id:'millennium',name_ja:'ミレニアム',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.978,group:'facet_step'},
  {id:'concave',name_ja:'コンケーブ',model:'ellipsoid',measurement_fields:['L','W','D'],correction_factor:0.979,group:'facet_step'},
  {id:'briolette',name_ja:'ブリオレット',model:'bicone',measurement_fields:['r','h_half'],correction_factor:0.972,group:'facet_step'},
  {id:'cabochon',name_ja:'カボション\n（円）',model:'cabochon',measurement_fields:['d','h'],correction_factor:1.020,group:'cabochon'},
  {id:'cabochon_ellipsoid',name_ja:'カボション\n（楕円）',model:'cabochon_ellipsoid',measurement_fields:['L','W','h'],correction_factor:1.020,group:'cabochon'},
  {id:'buff_top',name_ja:'バフトップ',model:'cabochon',measurement_fields:['d','h'],correction_factor:1.019,group:'cabochon'},
  {id:'pearl_round',name_ja:'丸（球体）',model:'pearl_round',measurement_fields:['d'],correction_factor:1.000,group:'pearl'},
  {id:'mabe_pearl',name_ja:'マベパール',model:'pearl_mabe',measurement_fields:['L','W','h'],correction_factor:1.000,group:'pearl'},
];
const CUT_GROUPS_DEF = [
  {id:'facet_round',label:'ファセットカット（丸・曲線系）'},
  {id:'facet_step', label:'ファセットカット（角・直線系）'},
  {id:'cabochon',   label:'カボション・磨き仕上げ'},
  {id:'pearl',      label:'真珠・球体'},
];

const MODELS = {
  ellipsoid:          (L,W,D)=>Math.PI*L*W*D/6.0,
  round:              (d,D,cr=0.40)=>{const r=d/2,Hc=D*cr,Hp=D-Hc,Rc=(r*r+Hc*Hc)/(2*Hc),Vc=Math.PI*Hc*Hc*(Rc-Hc/3),Vp=(1/3)*Math.PI*r*r*Hp;return Vc+Vp;},
  prism_box:          (L,W,D)=>L*W*D*0.94,
  prism_box_square:   (a,D)=>a*a*D*0.93,
  cabochon:           (d,h)=>{const a=d/2,r=(a*a+h*h)/(2*h);return Math.PI*h*h*(r-h/3);},
  cabochon_ellipsoid: (L,W,h)=>{const a=Math.sqrt(L*W)/2,r=(a*a+h*h)/(2*h);return Math.PI*h*h*(r-h/3);},
  bicone:             (r,h_half)=>(2/3)*Math.PI*r*r*h_half*1.03,
  trilliant:          (A,D)=>(1/3)*A*D*0.97,
  pear:               (L,W,D,sp=0.60)=>{const tH=D*sp,bH=D-tH,tV=Math.PI*L*W*tH/6,bV=(1/3)*Math.PI*(W/2)**2*bH;return tV+bV+tV*0.01;},
  pearl_round:        (d)=>(4/3)*Math.PI*(d/2)**3,
  pearl_mabe:         (L,W,h)=>(2/3)*Math.PI*(L/2)*(W/2)*h,
};

const DIM_LABELS = {d:'直径',D:'厚み / 全高',L:'縦（長辺）',W:'横（短辺）',a:'辺長',r:'最大半径',h:'高さ（ドーム）',h_half:'片側高さ',A:'底面積（mm²）',split_ratio:'上部割合'};
const DIM_DEFAULTS = {d:5,D:3,L:8,W:6,a:5,r:4,h:2,h_half:4,A:50,split_ratio:0.6};
const DIM_STEPS    = {A:1,split_ratio:0.05};

const CUT_SVGS = {
  round_brilliant:`<svg viewBox="0 0 44 44" fill="none"><circle cx="22" cy="22" r="15" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><circle cx="22" cy="22" r="8" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="7" y1="22" x2="37" y2="22" stroke="#C09A50" stroke-width=".5" opacity=".4"/><line x1="22" y1="7" x2="22" y2="37" stroke="#C09A50" stroke-width=".5" opacity=".4"/><line x1="11" y1="11" x2="33" y2="33" stroke="#C09A50" stroke-width=".5" opacity=".35"/><line x1="33" y1="11" x2="11" y2="33" stroke="#C09A50" stroke-width=".5" opacity=".35"/></svg>`,
  oval:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="22" rx="15" ry="11" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><ellipse cx="22" cy="22" rx="8" ry="5" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="7" y1="22" x2="37" y2="22" stroke="#C09A50" stroke-width=".5" opacity=".4"/><line x1="22" y1="11" x2="22" y2="33" stroke="#C09A50" stroke-width=".5" opacity=".4"/></svg>`,
  cushion:`<svg viewBox="0 0 44 44" fill="none"><rect x="8" y="8" width="28" height="28" rx="7" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="14" y="14" width="16" height="16" rx="3" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="8" y1="22" x2="36" y2="22" stroke="#C09A50" stroke-width=".5" opacity=".4"/><line x1="22" y1="8" x2="22" y2="36" stroke="#C09A50" stroke-width=".5" opacity=".4"/></svg>`,
  antique_cushion:`<svg viewBox="0 0 44 44" fill="none"><rect x="7" y="9" width="30" height="26" rx="6" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="13" y="14" width="18" height="16" rx="3" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  marquise:`<svg viewBox="0 0 44 44" fill="none"><path d="M22 5 Q38 22 22 39 Q6 22 22 5Z" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M22 11 Q33 22 22 33 Q11 22 22 11Z" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="22" y1="5" x2="22" y2="39" stroke="#C09A50" stroke-width=".5" opacity=".5"/></svg>`,
  pear:`<svg viewBox="0 0 44 44" fill="none"><path d="M22 6 Q36 16 36 26 Q36 38 22 38 Q8 38 8 26 Q8 16 22 6Z" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M22 12 Q31 20 31 27 Q31 34 22 34 Q13 34 13 27 Q13 20 22 12Z" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  heart:`<svg viewBox="0 0 44 44" fill="none"><path d="M22 30 C22 30 11 23 11 16 C11 13 14 11.5 16.5 12.5 C18.5 13.3 21 16 22 17.5 C23 16 25.5 13.3 27.5 12.5 C30 11.5 33 13 33 16 C33 23 22 30 22 30Z" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/></svg>`,
  trilliant:`<svg viewBox="0 0 44 44" fill="none"><polygon points="22,5 40,37 4,37" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><polygon points="22,14 33,33 11,33" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  princess:`<svg viewBox="0 0 44 44" fill="none"><rect x="8" y="8" width="28" height="28" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="14" y="14" width="16" height="16" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="8" y1="8" x2="14" y2="14" stroke="#C09A50" stroke-width=".5" opacity=".6"/><line x1="36" y1="8" x2="30" y2="14" stroke="#C09A50" stroke-width=".5" opacity=".6"/><line x1="8" y1="36" x2="14" y2="30" stroke="#C09A50" stroke-width=".5" opacity=".6"/><line x1="36" y1="36" x2="30" y2="30" stroke="#C09A50" stroke-width=".5" opacity=".6"/></svg>`,
  square:`<svg viewBox="0 0 44 44" fill="none"><rect x="7" y="7" width="30" height="30" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="13" y="13" width="18" height="18" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/><line x1="7" y1="7" x2="37" y2="37" stroke="#C09A50" stroke-width=".5" opacity=".5"/><line x1="37" y1="7" x2="7" y2="37" stroke="#C09A50" stroke-width=".5" opacity=".5"/></svg>`,
  emerald:`<svg viewBox="0 0 44 44" fill="none"><polygon points="10,7 34,7 39,13 39,31 34,37 10,37 5,31 5,13" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><polygon points="14,12 30,12 34,17 34,27 30,32 14,32 10,27 10,17" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  octagon:`<svg viewBox="0 0 44 44" fill="none"><polygon points="14,5 30,5 39,14 39,30 30,39 14,39 5,30 5,14" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><polygon points="17,11 27,11 33,17 33,27 27,33 17,33 11,27 11,17" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  baguette:`<svg viewBox="0 0 44 44" fill="none"><rect x="8" y="12" width="28" height="20" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="13" y="16" width="18" height="12" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  mirror:`<svg viewBox="0 0 44 44" fill="none"><rect x="7" y="10" width="30" height="24" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><rect x="13" y="15" width="18" height="14" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  millennium:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="22" rx="14" ry="11" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><ellipse cx="22" cy="22" rx="7" ry="5" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.12)"/></svg>`,
  concave:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="22" rx="15" ry="11" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M 7 22 Q 22 16 37 22" stroke="#C09A50" stroke-width=".7" fill="none"/><path d="M 7 22 Q 22 28 37 22" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.1)"/></svg>`,
  briolette:`<svg viewBox="0 0 44 44" fill="none"><path d="M22 4 Q35 22 22 40 Q9 22 22 4Z" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><line x1="22" y1="4" x2="22" y2="40" stroke="#C09A50" stroke-width=".5" opacity=".5"/><line x1="10" y1="18" x2="34" y2="18" stroke="#C09A50" stroke-width=".5" opacity=".4"/><line x1="13" y1="27" x2="31" y2="27" stroke="#C09A50" stroke-width=".5" opacity=".4"/></svg>`,
  cabochon:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="28" rx="14" ry="9" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M8 28 Q22 8 36 28" stroke="#C09A50" stroke-width="1" fill="rgba(192,154,80,.15)"/><line x1="8" y1="28" x2="36" y2="28" stroke="#C09A50" stroke-width=".5" opacity=".5"/></svg>`,
  cabochon_ellipsoid:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="26" rx="16" ry="11" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M6 26 Q22 10 38 26" stroke="#C09A50" stroke-width="1" fill="rgba(192,154,80,.15)"/><line x1="6" y1="26" x2="38" y2="26" stroke="#C09A50" stroke-width=".5" opacity=".5"/></svg>`,
  buff_top:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="30" rx="14" ry="8" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M8 30 Q22 14 36 30" stroke="#C09A50" stroke-width="1" fill="rgba(192,154,80,.12)"/><polygon points="14,30 30,30 32,24 12,24" stroke="#C09A50" stroke-width=".7" fill="rgba(192,154,80,.1)"/></svg>`,
  pearl_round:`<svg viewBox="0 0 44 44" fill="none"><circle cx="22" cy="22" r="16" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><circle cx="18" cy="17" r="4" fill="rgba(255,255,255,.08)"/></svg>`,
  mabe_pearl:`<svg viewBox="0 0 44 44" fill="none"><ellipse cx="22" cy="28" rx="16" ry="11" stroke="#C09A50" stroke-width="1.2" fill="rgba(192,154,80,.08)"/><path d="M6 28 Q22 6 38 28" stroke="#C09A50" stroke-width="1" fill="rgba(192,154,80,.15)"/><ellipse cx="17" cy="21" rx="4" ry="3" fill="rgba(255,255,255,.07)"/></svg>`,
};

// ══════════════════════════════════════════════════
//  STATE
// ══════════════════════════════════════════════════
let GEMSTONES = [];
let CALIBRATIONS = [];
let selectedGemId   = null;
let selectedCutId   = CUTS[0].id;
let activeGroup     = 'all';
let gemGridVisible  = true;

// ── Multiplier Drum State ──
const MULTIPLIER_VALUES = [1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2.0];
let drumIndex = 0; // index 0 = 1.0

function getMultiplier() {
  return MULTIPLIER_VALUES[drumIndex];
}

function buildDrum() {
  const track = document.getElementById('drumTrack');
  track.innerHTML = '';
  MULTIPLIER_VALUES.forEach((v,i) => {
    const item = document.createElement('div');
    item.className = 'drum-item';
    item.dataset.index = i;
    item.textContent = v.toFixed(1);
    track.appendChild(item);
  });
  updateDrum(false);
}

function updateDrum(animate) {
  const track = document.getElementById('drumTrack');
  const ITEM_H = 30;
  if (!animate) {
    track.style.transition = 'none';
  } else {
    track.style.transition = 'transform 0.22s cubic-bezier(0.4,0,0.2,1)';
  }
  track.style.transform = `translateY(${-drumIndex * ITEM_H}px)`;

  // Style items by distance from center
  track.querySelectorAll('.drum-item').forEach((item, i) => {
    const dist = Math.abs(i - drumIndex);
    item.className = 'drum-item';
    if (dist === 1) item.classList.add('dim');
    if (dist >= 2) item.classList.add('far-dim');
  });
}

function drumStep(dir) {
  // dir: -1 = decrease (up arrow = lower value), +1 = increase (down arrow = higher value)
  const next = drumIndex + dir;
  if (next < 0 || next >= MULTIPLIER_VALUES.length) return;
  drumIndex = next;
  updateDrum(true);
}

// Touch / swipe support for drum
function initDrumTouch() {
  const viewport = document.getElementById('drumViewport');
  let startY = 0;
  let isDragging = false;

  viewport.addEventListener('touchstart', e => {
    startY = e.touches[0].clientY;
    isDragging = true;
  }, {passive:true});

  viewport.addEventListener('touchmove', e => {
    if (!isDragging) return;
    e.preventDefault();
  }, {passive:false});

  viewport.addEventListener('touchend', e => {
    if (!isDragging) return;
    isDragging = false;
    const dy = startY - e.changedTouches[0].clientY;
    if (Math.abs(dy) > 10) {
      drumStep(dy > 0 ? 1 : -1);
    }
  }, {passive:true});

  // Mouse wheel
  viewport.addEventListener('wheel', e => {
    e.preventDefault();
    drumStep(e.deltaY > 0 ? 1 : -1);
  }, {passive:false});
}

// ══════════════════════════════════════════════════
//  Wikimedia image loading
// ══════════════════════════════════════════════════
const GEM_COMMONS_CATEGORIES = {
  diamond:'Faceted diamonds',ruby:'Faceted rubies',sapphire:'Faceted sapphires',
  emerald:'Faceted emeralds',aquamarine:'Faceted aquamarines',alexandrite:'Alexandrite',
  amethyst:'Faceted amethysts',ametrine:'Ametrine',andalusite:'Andalusite',
  apatite:'Apatite',amber:'Amber gemstones',axinite:'Axinite',benitoite:'Benitoite',
  beryl:'Beryl',brazilianite:'Brazilianite',carnelian:'Carnelian',cassiterite:'Cassiterite',
  cat_eye_chrysoberyl:'Chrysoberyl',chalcedony:'Chalcedony',charoite:'Charoite',
  chrome_diopside:'Diopside',chrome_tourmaline:'Tourmaline',chrysoberyl:'Chrysoberyl',
  chrysoprase:'Chrysoprase',citrine:'Faceted citrines',clinohumite:'Clinohumite',
  cobaltite:'Cobaltite',conch_pearl:'Conch pearls',coral:'Coral gemstones',
  cubic_zirconia_synth:'Cubic zirconia',cuprite:'Cuprite',danburite:'Danburite',
  demantoid:'Demantoid',diaspore:'Diaspore',diopside:'Diopside',dumortierite:'Dumortierite',
  enstatite:'Enstatite',epidote:'Epidote',euclase:'Euclase',fabulite:'Cubic zirconia',
  feldspar_sunstone:'Sunstone',fire_agate:'Fire agate',fire_opal:'Fire opals',
  fluorite:'Fluorite',forsterite:'Forsterite',garnet_almandine:'Almandine',
  garnet_grossular:'Grossular',garnet_hessonite:'Hessonite',garnet_malaia:'Malaia garnet',
  garnet_mandarin:'Spessartine',garnet_pyrope:'Pyrope',garnet_rhodolite:'Rhodolite',
  garnet_spessartite:'Spessartine',garnet_tsavorite:'Tsavorite',garnet_uvarovite:'Uvarovite',
  gaspeite:'Gaspeite',goshenite:'Goshenite',heliodor:'Heliodor',hematite:'Hematite',
  hessonite:'Hessonite',hiddenite:'Hiddenite',howlite:'Howlite',hypersthene:'Hypersthene',
  idocrase:'Vesuvianite',iolite:'Iolite',ivory:'Ivory',jadeite:'Jadeite',jasper:'Jasper',
  jeremejevite:'Jeremejevite',jet:'Jet gemstone',kornerupine:'Kornerupine',kunzite:'Kunzite',
  kyanite:'Kyanite',labradorite:'Labradorite',lapis_lazuli:'Lapis lazuli',larimar:'Larimar',
  lazulite:'Lazulite',lepidolite:'Lepidolite',malachite:'Malachite',moldavite:'Moldavite',
  moonstone:'Moonstone',morganite:'Morganite',musgravite:'Musgravite',nephrite:'Nephrite',
  obsidian:'Obsidian',onyx:'Onyx',opal_black:'Black opals',opal_boulder:'Boulder opals',
  opal_crystal:'Crystal opals',opal_white:'White opals',orthoclase:'Orthoclase',
  painite:'Painite',pearl:'Pearls',pearl_mabe:'Mabé pearls',peridot:'Faceted peridots',
  phenakite:'Phenakite',pietersite:'Pietersite',prasiolite:'Prasiolite',prehnite:'Prehnite',
  pyrite:'Pyrite',pyromorphite:'Pyromorphite',quartz:'Quartz gemstones',
  rhodochrosite:'Rhodochrosite',rhodolite:'Rhodolite',rhodonite:'Rhodonite',
  rose_quartz:'Rose quartz',rubellite:'Rubellite',rutile:'Rutile',
  rutilated_quartz:'Rutilated quartz',sapphire_padparadscha:'Padparadscha',
  sapphire_star:'Star sapphires',scapolite:'Scapolite',shell_cameo:'Cameos',
  sinhalite:'Sinhalite',smithsonite:'Smithsonite',sodalite:'Sodalite',
  sphalerite:'Sphalerite',sphene:'Titanite',spinel:'Faceted spinels',
  spinel_blue:'Faceted spinels',spodumene:'Spodumene',star_ruby:'Star rubies',
  staurolite:'Staurolite',sugilite:'Sugilite',sunstone:'Sunstone',tanzanite:'Tanzanite',
  tiger_eye:'Tiger eye',topaz:'Faceted topazes',topaz_imperial:'Faceted topazes',
  tourmaline:'Faceted tourmalines',tourmaline_blue:'Indicolite',
  tourmaline_green:'Faceted tourmalines',tourmaline_paraiba:'Paraíba tourmaline',
  tourmaline_watermelon:'Watermelon tourmaline',tremolite:'Tremolite',tsavorite:'Tsavorite',
  turquoise:'Turquoise',unakite:'Unakite',variscite:'Variscite',vesuvianite:'Vesuvianite',
  vivianite:'Vivianite',wardite:'Wardite',williamsite:'Serpentine group',willemite:'Willemite',
  zircon_blue:'Faceted zircons',zircon_colorless:'Faceted zircons',
  zircon_orange:'Faceted zircons',zircon_red:'Faceted zircons',zoisite:'Tanzanite',
};

const _catCache = {};

async function fetchCategoryImage(category) {
  if (_catCache[category] !== undefined) return _catCache[category];
  try {
    const url = `https://commons.wikimedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:${encodeURIComponent(category)}&cmtype=file&cmlimit=20&format=json&origin=*`;
    const resp = await fetch(url);
    const data = await resp.json();
    const members = data?.query?.categorymembers || [];
    const imgFiles = members.filter(m => /\.(jpg|jpeg|png)$/i.test(m.title));
    if (!imgFiles.length) { _catCache[category] = null; return null; }
    const chosen = imgFiles[0].title.replace('File:', '');
    const infoUrl = `https://commons.wikimedia.org/w/api.php?action=query&titles=File:${encodeURIComponent(chosen)}&prop=imageinfo&iiprop=url&iiurlwidth=320&format=json&origin=*`;
    const infoResp = await fetch(infoUrl);
    const infoData = await infoResp.json();
    const pages = infoData?.query?.pages || {};
    const page = Object.values(pages)[0];
    const thumb = page?.imageinfo?.[0]?.thumburl || null;
    _catCache[category] = thumb;
    return thumb;
  } catch(e) {
    _catCache[category] = null;
    return null;
  }
}

function setGemImage(gemId, url) {
  const gem = GEMSTONES.find(g => g.id === gemId);
  if (gem) gem.image_url = url;
  const card = document.querySelector(`.gem-card[data-id="${gemId}"]`);
  if (card) {
    const photo = card.querySelector('.gem-photo');
    const swatch = card.querySelector('.swatch-fallback');
    let img = photo.querySelector('img');
    if (!img) {
      img = document.createElement('img');
      img.alt = gem ? gem.name_ja : gemId;
      img.loading = 'lazy';
      photo.insertBefore(img, swatch);
    }
    img.onerror = function() { this.style.display='none'; if(swatch)swatch.style.display='flex'; };
    img.onload  = function() { this.style.display=''; if(swatch)swatch.style.display='none'; };
    if (swatch) swatch.style.display = 'none';
    img.src = url;
  }
  if (gemId === selectedGemId) {
    const thumb = document.getElementById('bannerThumb');
    if (thumb) { const bImg = thumb.querySelector('img'); if(bImg) bImg.src = url; }
  }
}

async function loadGemImages() {
  const ids = Object.keys(GEM_COMMONS_CATEGORIES);
  const BATCH = 5;
  for (let i = 0; i < ids.length; i += BATCH) {
    const batch = ids.slice(i, i + BATCH);
    await Promise.all(batch.map(async gemId => {
      const cat = GEM_COMMONS_CATEGORIES[gemId];
      const url = await fetchCategoryImage(cat);
      if (url) setGemImage(gemId, url);
    }));
  }
}

// ══════════════════════════════════════════════════
//  INIT
// ══════════════════════════════════════════════════
async function init() {
  GEMSTONES = GEMSTONES_DATA;
  try {
    const r = await fetch('./data/calibrations.json');
    const d = await r.json();
    CALIBRATIONS = d.calibrations || [];
  } catch(e) { CALIBRATIONS = []; }

  buildColorTiles();
  buildGemGrid();
  buildCutGroups();
  buildDimFields(selectedCutId);
  selectGem(GEMSTONES[0].id, false);

  buildDrum();
  initDrumTouch();

  document.getElementById('drumDown').addEventListener('click', () => drumStep(-1));
  document.getElementById('drumUp').addEventListener('click',   () => drumStep(+1));

  loadGemImages();
}

// ══════════════════════════════════════════════════
//  COLOR TILES
// ══════════════════════════════════════════════════
function buildColorTiles() {
  const wrap = document.getElementById('colorTiles');
  COLOR_GROUPS.forEach(g => {
    const tile = document.createElement('div');
    tile.className = 'color-tile' + (g.id === 'all' ? ' active' : '');
    tile.dataset.group = g.id;
    tile.innerHTML = `<div class="tile-swatch" style="background:${g.swatch}"></div><div class="tile-label">${g.label}</div>`;
    tile.addEventListener('click', () => filterByGroup(g.id));
    wrap.appendChild(tile);
  });
}

function filterByGroup(groupId) {
  activeGroup = groupId;
  document.querySelectorAll('.color-tile').forEach(t =>
    t.classList.toggle('active', t.dataset.group === groupId));
  document.getElementById('searchInput').value = '';
  filterGems();
}

// ══════════════════════════════════════════════════
//  GEM GRID
// ══════════════════════════════════════════════════
function isKatakana(s) { return /^[\u30A0-\u30FF]/.test(s); }

function buildGemGrid() {
  const grid = document.getElementById('gemGrid');
  grid.innerHTML = '';
  const sorted = [...GEMSTONES].sort((a,b) => {
    const ak = isKatakana(a.name_ja), bk = isKatakana(b.name_ja);
    if(ak && !bk) return -1; if(!ak && bk) return 1;
    return a.name_ja.localeCompare(b.name_ja, 'ja');
  });
  sorted.forEach(g => {
    const card = document.createElement('div');
    card.className = 'gem-card';
    card.dataset.id = g.id;
    card.dataset.group = g.color_group || 'multi';
    card.dataset.name = g.name_ja;
    const hasImg = !!g.image_url;
    card.innerHTML = `
      <div class="gem-photo">
        ${hasImg ? `<img src="${g.image_url}" alt="${g.name_ja}" loading="lazy" onerror="this.style.display='none';this.parentNode.querySelector('.swatch-fallback').style.display='flex'">` : ''}
        <div class="swatch-fallback" style="background:${g.color_swatch||'#333'};${hasImg?'display:none':''}">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"><path d="M12 2L2 9l10 13 10-13-10-7z"/></svg>
        </div>
      </div>
      <div class="gem-info">
        <div class="gem-name">${g.name_ja}</div>
        <div class="gem-sg">SG ${g.sg_std}</div>
      </div>`;
    card.addEventListener('click', () => selectGem(g.id, true));
    grid.appendChild(card);
  });
}

function filterGems() {
  const q = document.getElementById('searchInput').value.trim();
  const grid = document.getElementById('gemGrid');
  grid.classList.toggle('search-mode', q.length > 0);
  document.querySelectorAll('.gem-card').forEach(card => {
    const matchGroup = activeGroup === 'all' || card.dataset.group === activeGroup;
    const matchName  = !q || card.dataset.name.includes(q);
    card.classList.toggle('hidden', !matchGroup || !matchName);
  });
}

function selectGem(gemId, showBanner) {
  selectedGemId = gemId;
  const g = GEMSTONES.find(x => x.id === gemId);
  if(!g) return;
  document.querySelectorAll('.gem-card').forEach(c =>
    c.classList.toggle('active', c.dataset.id === gemId));
  if(showBanner) showGemBanner(g);
}

function showGemBanner(g) {
  gemGridVisible = false;
  document.getElementById('gemGrid').style.display = 'none';
  document.getElementById('colorTiles').style.display = 'none';
  document.getElementById('searchInput').closest('.search-wrap').style.display = 'none';
  const banner = document.getElementById('gemBanner');
  banner.classList.add('show');
  const thumb = document.getElementById('bannerThumb');
  thumb.innerHTML = '';
  if(g.image_url) {
    const img = document.createElement('img');
    img.src = g.image_url; img.alt = g.name_ja;
    img.style.cssText = 'width:100%;height:100%;object-fit:cover;border-radius:8px';
    img.onerror = () => { thumb.innerHTML=''; thumb.style.background=g.color_swatch||'#333'; thumb.style.borderRadius='8px'; };
    thumb.appendChild(img);
  } else {
    thumb.style.background = g.color_swatch || '#333';
    thumb.style.borderRadius = '8px';
  }
  document.getElementById('bannerName').textContent = g.name_ja;
  document.getElementById('bannerDesc').textContent = g.description || '';
  document.getElementById('bannerSg').textContent   = `比重 SG: ${g.sg_std}  (${g.sg_min} – ${g.sg_max})`;
}

function showGemGrid() {
  gemGridVisible = true;
  document.getElementById('gemGrid').style.display = 'grid';
  document.getElementById('colorTiles').style.display = 'grid';
  document.getElementById('searchInput').closest('.search-wrap').style.display = 'block';
  document.getElementById('gemBanner').classList.remove('show');
}

// ══════════════════════════════════════════════════
//  CUT GROUPS
// ══════════════════════════════════════════════════
function buildCutGroups() {
  const wrap = document.getElementById('cutGroups');
  wrap.innerHTML = '';
  CUT_GROUPS_DEF.forEach(grp => {
    const cuts = CUTS.filter(c => c.group === grp.id);
    if(!cuts.length) return;
    const div = document.createElement('div');
    div.className = 'cut-group';
    div.innerHTML = `<div class="cut-group-title">${grp.label}</div>`;
    const grid = document.createElement('div');
    grid.className = 'cut-grid';
    cuts.forEach(cut => {
      const card = document.createElement('div');
      card.className = 'cut-card' + (cut.id === selectedCutId ? ' active' : '');
      card.dataset.id = cut.id;
      card.innerHTML = `
        <div class="cut-svg">${CUT_SVGS[cut.id]||'<svg viewBox="0 0 44 44"><circle cx="22" cy="22" r="14" stroke="#C09A50" stroke-width="1"/></svg>'}</div>
        <div class="cut-name">${cut.name_ja.replace('\n','<br>')}</div>`;
      card.addEventListener('click', () => selectCut(cut.id));
      grid.appendChild(card);
    });
    div.appendChild(grid);
    wrap.appendChild(div);
  });
}

function selectCut(cutId) {
  selectedCutId = cutId;
  document.querySelectorAll('.cut-card').forEach(c =>
    c.classList.toggle('active', c.dataset.id === cutId));
  buildDimFields(cutId);
}

// ══════════════════════════════════════════════════
//  DIMENSION FIELDS
// ══════════════════════════════════════════════════
function buildDimFields(cutId) {
  const cut  = CUTS.find(c => c.id === cutId);
  const grid = document.getElementById('dimGrid');
  grid.innerHTML = '';
  cut.measurement_fields.forEach(f => {
    const wrap = document.createElement('div');
    wrap.className = 'dim-field';
    const unit = f === 'A' ? 'mm²' : f === 'split_ratio' ? '（0.4〜0.7）' : 'mm';
    wrap.innerHTML = `
      <label class="dim-label" for="dim_${f}">${DIM_LABELS[f] || f}　${unit}</label>
      <input class="dim-input" id="dim_${f}" type="number"
        step="${DIM_STEPS[f] || 0.01}"
        placeholder="${DIM_DEFAULTS[f] || 0}"
        min="${f === 'split_ratio' ? 0.4 : 0.01}"
        ${f === 'split_ratio' ? 'max="0.7"' : ''}>`;
    grid.appendChild(wrap);
  });
}

// ══════════════════════════════════════════════════
//  CALCULATE
// ══════════════════════════════════════════════════
document.getElementById('calcBtn').addEventListener('click', calculate);

function calculate() {
  if(!selectedGemId) { alert('石の種類を選択してください'); return; }
  const stone = GEMSTONES.find(s => s.id === selectedGemId);
  const cut   = CUTS.find(c => c.id === selectedCutId);
  const fn    = MODELS[cut.model];
  const args  = cut.measurement_fields.map(f => {
    const v = parseFloat(document.getElementById('dim_'+f)?.value);
    return isNaN(v) ? (DIM_DEFAULTS[f] || 0) : v;
  });

  let V = fn(...args) * cut.correction_factor;
  let massG = stone.sg_std * V / 1000;

  // Calibration
  const cal = CALIBRATIONS.filter(c => c.stone === selectedGemId && c.cut === selectedCutId);
  let calibApplied = false;
  if(cal.length > 0) {
    const avg = cal.reduce((s,c) => s + c.correction_factor, 0) / cal.length;
    massG *= avg;
    calibApplied = true;
  }

  // Apply multiplier
  const multiplier = getMultiplier();
  massG *= multiplier;

  const massCt = massG / 0.2;
  document.getElementById('resultG').textContent  = massG.toFixed(3);
  document.getElementById('resultCt').textContent = massCt.toFixed(3);

  const multNote = multiplier !== 1.0 ? `　×${multiplier.toFixed(1)}` : '';
  document.getElementById('resultGemName').textContent =
    `${stone.name_ja}　/　${cut.name_ja.replace('\n',' ')}${multNote}`;
  document.getElementById('calibNote').textContent = calibApplied
    ? '▸ 実測補正データ適用済み'
    : '▸ 標準モデル値（補正データなし）';
  document.getElementById('resultPanel').classList.add('has-value');
  document.getElementById('resultPanel').scrollIntoView({behavior:'smooth',block:'nearest'});
}

// ══════════════════════════════════════════════════
//  RESET
// ══════════════════════════════════════════════════
document.getElementById('resetBtn').addEventListener('click', () => {
  showGemGrid();
  filterByGroup('all');
  selectGem(GEMSTONES[0]?.id, false);
  selectCut(CUTS[0].id);
  drumIndex = 0;
  updateDrum(true);
  document.getElementById('resultG').textContent  = '0.000';
  document.getElementById('resultCt').textContent = '0.000';
  document.getElementById('resultGemName').textContent = '';
  document.getElementById('calibNote').textContent = '';
  document.getElementById('resultPanel').classList.remove('has-value');
  document.getElementById('searchInput').value = '';
});

document.getElementById('searchInput').addEventListener('input', () => {
  const q = document.getElementById('searchInput').value;
  if(q) {
    activeGroup = 'all';
    document.querySelectorAll('.color-tile').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-group="all"]')?.classList.add('active');
  }
  filterGems();
});

function notifyHeight(){parent.postMessage({type:'resize-iframe',height:document.body.scrollHeight},'*')}
window.addEventListener('load',notifyHeight);
window.addEventListener('resize',notifyHeight);

init();
</script>
</body>
</html>
