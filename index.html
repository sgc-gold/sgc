<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <link rel="icon" href="https://raw.githubusercontent.com/sgc-gold/sgc/main/image/sgc-icon.png" type="image/png">
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/sgc-gold/sgc/main/image/sgc-icon.png">
  <title>SGC 社内ポータル</title>
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --green:      #1A3628;
    --green-lt:   #254D38;
    --green-dk:   #0E1F17;
    --gold:       #C09A50;
    --gold-lt:    #E8D49A;
    --gold-dk:    #8A6A28;
    --cream:      #F7F3EB;
    --white:      #FFFFFF;
    --ink:        #0E0D0B;
    --border:     rgba(192,154,80,0.18);
    --nav-w:      260px;
    --header-h:   58px;
    --bottom-h:   64px;
  }

  html, body {
    width: 100%; height: 100%;
    overflow: hidden;
    background: var(--green-dk);
  }

  /* ═══════════════════════════════
     APP SHELL LAYOUT
     header fixed top
     nav fixed left (desktop) / bottom (mobile)
     content fills remainder
  ═══════════════════════════════ */

  /* ─── Header ─── */
  #app-header {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: var(--header-h);
    z-index: 300;
    background: var(--green-dk);
    border-bottom: 1px solid rgba(192,154,80,0.15);
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 12px;
  }
  #app-header::after {
    content: '';
    position: absolute;
    bottom: -1px; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, var(--gold-dk) 20%, var(--gold) 50%, var(--gold-dk) 80%, transparent 100%);
  }

  .header-logo {
    height: 28px;
    width: auto;
    opacity: 0.92;
    flex-shrink: 0;
  }

  .header-title {
    flex: 1;
    font-family: 'Shippori Mincho', serif;
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--white);
    letter-spacing: 0.1em;
    cursor: pointer;
    user-select: none;
  }
  .header-title:hover { color: var(--gold-lt); }

  .hamburger {
    display: none;
    flex-direction: column;
    gap: 5px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 6px;
    border-radius: 8px;
    transition: background 0.18s;
    flex-shrink: 0;
  }
  .hamburger:hover { background: rgba(255,255,255,0.08); }
  .hamburger span {
    display: block;
    width: 22px; height: 2px;
    background: rgba(255,255,255,0.8);
    border-radius: 2px;
    transition: all 0.28s ease;
  }
  .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
  .hamburger.open span:nth-child(2) { opacity: 0; transform: scaleX(0); }
  .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

  /* ─── Sidebar ─── */
  #sidebar {
    position: fixed;
    top: var(--header-h);
    left: 0;
    width: var(--nav-w);
    bottom: 0;
    z-index: 200;
    background: var(--green-dk);
    border-right: 1px solid rgba(192,154,80,0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
  }

  .sidebar-scroll {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 18px 12px 24px;
    scrollbar-width: thin;
    scrollbar-color: rgba(192,154,80,0.2) transparent;
  }
  .sidebar-scroll::-webkit-scrollbar { width: 4px; }
  .sidebar-scroll::-webkit-scrollbar-track { background: transparent; }
  .sidebar-scroll::-webkit-scrollbar-thumb { background: rgba(192,154,80,0.2); border-radius: 4px; }

  /* Nav section */
  .nav-section { margin-bottom: 6px; }
  .nav-section-title {
    font-size: 0.58rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: rgba(192,154,80,0.5);
    padding: 14px 10px 5px;
    font-family: 'DM Sans', sans-serif;
    font-weight: 400;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .nav-section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(192,154,80,0.12);
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 10px;
    border-radius: 8px;
    color: rgba(255,255,255,0.6);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 400;
    text-decoration: none;
    cursor: pointer;
    transition: background 0.16s, color 0.16s;
    border: 1px solid transparent;
    user-select: none;
    letter-spacing: 0.01em;
  }
  .nav-link:hover {
    background: rgba(255,255,255,0.05);
    color: rgba(255,255,255,0.88);
  }
  .nav-link.active {
    background: rgba(192,154,80,0.12);
    color: var(--gold-lt);
    border-color: rgba(192,154,80,0.18);
  }
  .nav-link .nav-icon {
    width: 18px; height: 18px;
    opacity: 0.5;
    flex-shrink: 0;
    transition: opacity 0.16s;
  }
  .nav-link:hover .nav-icon,
  .nav-link.active .nav-icon { opacity: 0.9; }
  .nav-link.disabled {
    opacity: 0.3;
    pointer-events: none;
    text-decoration: line-through;
  }

  /* Sidebar footer */
  .sidebar-footer {
    padding: 12px 14px;
    border-top: 1px solid rgba(192,154,80,0.1);
    font-size: 0.62rem;
    color: rgba(255,255,255,0.2);
    letter-spacing: 0.06em;
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    text-align: center;
  }

  /* ─── Main content area ─── */
  #content-area {
    position: fixed;
    top: var(--header-h);
    left: var(--nav-w);
    right: 0;
    bottom: 0;
    overflow: hidden;
    background: var(--cream);
  }

  #main-frame {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  /* ─── Overlay ─── */
  #overlay {
    position: fixed;
    inset: 0;
    z-index: 150;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(2px);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
  }
  #overlay.active { opacity: 1; visibility: visible; }

  /* ════════════════════════════════
     DESKTOP (≥ 900px): sidebar always visible
  ════════════════════════════════ */
  @media (min-width: 900px) {
    .hamburger { display: none !important; }
    #sidebar { transform: none !important; }
    #content-area { left: var(--nav-w); }
  }

  /* ════════════════════════════════
     MOBILE (< 900px): sidebar slides in, bottom nav
  ════════════════════════════════ */
  @media (max-width: 899px) {
    :root { --nav-w: 260px; }

    .hamburger { display: flex; }

    #sidebar {
      transform: translateX(calc(-1 * var(--nav-w)));
      bottom: 0;
      box-shadow: 4px 0 24px rgba(0,0,0,0.5);
    }
    #sidebar.open { transform: translateX(0); }

    #content-area {
      left: 0;
      bottom: var(--bottom-h);
    }

    /* Bottom navigation */
    #bottom-nav {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      height: var(--bottom-h);
      z-index: 200;
      background: var(--green-dk);
      border-top: 1px solid rgba(192,154,80,0.15);
      display: flex;
      align-items: center;
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    .bottom-nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 3px;
      padding: 6px 4px;
      cursor: pointer;
      color: rgba(255,255,255,0.45);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.6rem;
      letter-spacing: 0.04em;
      transition: color 0.18s;
      border: none;
      background: none;
      text-decoration: none;
    }
    .bottom-nav-item.active { color: var(--gold); }
    .bottom-nav-item svg { width: 20px; height: 20px; }
  }

  @media (min-width: 900px) {
    #bottom-nav { display: none; }
  }
  </style>
</head>
<body>

<!-- ─── Header ─── -->
<header id="app-header">
  <button class="hamburger" id="hamburger" onclick="toggleSidebar()">
    <span></span><span></span><span></span>
  </button>
  <div class="header-title" onclick="navigate('main.html', this)">社内ポータル</div>
  <img class="header-logo" src="https://www.sgc-gold.co.jp/img/header-logo.png" alt="SGC">
</header>

<!-- ─── Overlay ─── -->
<div id="overlay" onclick="closeSidebar()"></div>

<!-- ─── Sidebar ─── -->
<nav id="sidebar">
  <div class="sidebar-scroll">

    <div class="nav-section">
      <div class="nav-section-title">Home</div>
      <a class="nav-link active" onclick="navigate('main.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        トップページ
      </a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Market · 貴金属市況</div>
      <a class="nav-link" onclick="navigate('price.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        価格情報
      </a>
      <a class="nav-link" onclick="navigate('market.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
        市況情報
      </a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Purchase · 買取関連</div>
      <a class="nav-link" onclick="navigate('https://script.google.com/macros/s/AKfycbxV4bMjhApWrwqTBLsuu0BnSQ5L8TyaV40_qCOO_RFjT3-WHvosgeesx_LxWZAO4MFr/exec', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
        IGシリアル照合
      </a>
      <a class="nav-link" onclick="navigate('coin.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
        記念金貨買取価格
      </a>
      <a class="nav-link" onclick="navigate('https://script.google.com/macros/s/AKfycbxeQHB5lwwoTw0f-cgXh657fuaNiHL-LMbo5AfUOm9pDyftHNaF7OPi5hfMOrKNPhKYyQ/exec', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="9" y1="15" x2="15" y2="15"/></svg>
        買取 / 分割確認
      </a>
      <a class="nav-link" onclick="navigate('diamond.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M12 2L2 9l10 13 10-13-10-7z"/><path d="M2 9h20"/></svg>
        ダイヤ相場検索
      </a>
      <a class="nav-link" onclick="navigate('gemstone.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/></svg>
        色石重量検索
      </a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Sales · 販売関連</div>
      <a class="nav-link disabled">準備中</a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Reference · 社内資料</div>
      <a class="nav-link" onclick="navigate('schedule.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        スケジュール
      </a>
      <a class="nav-link" onclick="navigate('contacts.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
        拠点一覧
      </a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Media · メディア</div>
      <a class="nav-link" onclick="navigate('news.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 0-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8M15 18h-5M10 6h8v4h-8z"/></svg>
        ニュース
      </a>
      <a class="nav-link" onclick="navigate('youtube.html', this)">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46a2.78 2.78 0 0 0-1.95 1.96A29 29 0 0 0 1 12a29 29 0 0 0 .46 5.58A2.78 2.78 0 0 0 3.41 19.54C5.12 20 12 20 12 20s6.88 0 8.59-.46a2.78 2.78 0 0 0 1.95-1.96A29 29 0 0 0 23 12a29 29 0 0 0-.46-5.58z"/><polygon points="9.75 15.02 15.5 12 9.75 8.98 9.75 15.02"/></svg>
        YouTube
      </a>
    </div>

  </div>
  <div class="sidebar-footer">© SGC Co., Ltd.</div>
</nav>

<!-- ─── Content ─── -->
<div id="content-area">
  <iframe id="main-frame" src="main.html"></iframe>
</div>

<!-- ─── Bottom nav (mobile) ─── -->
<div id="bottom-nav">
  <a class="bottom-nav-item active" onclick="navigate('main.html', this)" data-nav="bottom">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
    ホーム
  </a>
  <a class="bottom-nav-item" onclick="navigate('price.html', this)" data-nav="bottom">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
    価格
  </a>
  <a class="bottom-nav-item" onclick="navigate('coin.html', this)" data-nav="bottom">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
    金貨
  </a>
  <a class="bottom-nav-item" onclick="navigate('market.html', this)" data-nav="bottom">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
    市況
  </a>
  <a class="bottom-nav-item" onclick="toggleSidebar()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
    メニュー
  </a>
</div>

<script>
const frame    = document.getElementById('main-frame');
const sidebar  = document.getElementById('sidebar');
const overlay  = document.getElementById('overlay');
const hamburger = document.getElementById('hamburger');

function navigate(url, el) {
  if (!url || url === '#') return;
  frame.src = url;

  // Update active state in sidebar
  document.querySelectorAll('#sidebar .nav-link').forEach(l => l.classList.remove('active'));
  if (el && el.closest && el.closest('#sidebar')) el.classList.add('active');

  // Update bottom nav active state
  document.querySelectorAll('.bottom-nav-item').forEach(l => l.classList.remove('active'));
  if (el && el.dataset && el.dataset.nav === 'bottom') el.classList.add('active');

  // Close sidebar on mobile
  if (window.innerWidth < 900) closeSidebar();
}

function toggleSidebar() {
  const open = sidebar.classList.toggle('open');
  hamburger.classList.toggle('open', open);
  overlay.classList.toggle('active', open);
}

function closeSidebar() {
  sidebar.classList.remove('open');
  hamburger.classList.remove('open');
  overlay.classList.remove('active');
}

// iframe height messages (legacy support)
window.addEventListener('message', e => {
  if (e.data.type === 'resize-iframe' && typeof e.data.height === 'number') {
    frame.style.height = (e.data.height + 40) + 'px';
  }
});
</script>
</body>
</html>
