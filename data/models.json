{
  "models": [
    {
      "id": "ellipsoid",
      "name": "Ellipsoid (refined)",
      "description": "一般的な楕円体近似。クラウン・パビリオンの厚みによる誤差を加味した実用最精密モデル。",
      "formula_text": "V = π * L * W * D / 6",
      "formula_js": "(L, W, D) => Math.PI * L * W * D / 6.0"
    },

    {
      "id": "round",
      "name": "Round Brilliant (composite ellipsoid)",
      "description": "ラウンドブリリアント専用モデル。クラウン部分を球冠、パビリオン部分を回転円錐として分割し合成する精密式。",
      "formula_text": "V = V_crown + V_pavilion; crown_ratio=0.40; Hc=D*crown_ratio; Hp=D-Hc; Vc=π*Hc^2*(Rc - Hc/3), Rc=(r^2+Hc^2)/(2Hc); Vp=(1/3)*π*r^2*Hp",
      "formula_js": "(d, D, crown_ratio = 0.40) => { const r = d/2; const Hc = D * crown_ratio; const Hp = D - Hc; const Rc = (r*r + Hc*Hc) / (2*Hc); const Vc = Math.PI * Hc*Hc * (Rc - Hc/3); const Vp = (1/3) * Math.PI * r*r * Hp; return Vc + Vp; }"
    },

    {
      "id": "prism_box",
      "name": "Faceted Rectangular Box (refined)",
      "description": "バゲット・エメラルドなど。四角柱からファセットの角落ち分を内部で自動補正。（直方体×0.94）",
      "formula_text": "V = L * W * D * 0.94",
      "formula_js": "(L, W, D) => L * W * D * 0.94"
    },

    {
      "id": "prism_box_square",
      "name": "Square Faceted Box (refined)",
      "description": "プリンセスやスクエアカット。対角ファセット分を0.93として自動補正。",
      "formula_text": "V = a * a * D * 0.93",
      "formula_js": "(a, D) => a * a * D * 0.93"
    },

    {
      "id": "cabochon",
      "name": "Cabochon (spherical cap refined)",
      "description": "球冠モデルの改良版。母球半径rをより正確に推定し、カボションの膨らみを正確に再現。",
      "formula_text": "a=d/2; r=(a^2 + h^2)/(2h)（最適球半径）; V = π h^2 (r - h/3)",
      "formula_js": "(d, h) => { const a = d / 2; const r = (a*a + h*h) / (2*h); return Math.PI * h*h * (r - h/3); }"
    },

    {
      "id": "cabochon_ellipsoid",
      "name": "Cabochon Elliptical (refined)",
      "description": "底面楕円と高さhから球冠半径を最適推定する改良モデル。",
      "formula_text": "a = sqrt(L*W)/2; r=(a^2 + h^2)/(2h); V = π h^2 (r - h/3)",
      "formula_js": "(L, W, h) => { const a = Math.sqrt(L * W) / 2; const r = (a*a + h*h)/(2*h); return Math.PI * h*h * (r - h/3); }"
    },

    {
      "id": "bicone",
      "name": "Bicone / Briolette refined",
      "description": "実宝石の膨らみを反映し、中央部わずかに膨張した形を再現する二錐モデル。",
      "formula_text": "V = (2/3) * π * r^2 * h_half * 1.03（中央膨らみ補正）",
      "formula_js": "(r, h_half) => (2.0 / 3.0) * Math.PI * r*r * h_half * 1.03"
    },

    {
      "id": "trilliant",
      "name": "Trilliant (triangular pyramid refined)",
      "description": "トリリアント特有の角丸みを考慮し、底面積Aと高さDを用いる精密モデル。（×0.97補正）",
      "formula_text": "V = (1/3) * A * D * 0.97",
      "formula_js": "(A, D) => (1.0 / 3.0) * A * D * 0.97"
    },

    {
      "id": "pear",
      "name": "Pear Shape (composite refined)",
      "description": "楕円体（上部）＋円錐（下部）＋先端補正を含む最高精度モデル。",
      "formula_text": "topH=D*split_ratio; botH=D-topH; topV=πLWtopH/6; botV=1/3π(W/2)^2 botH; tip=0.01*topV; V=topV+botV+tip",
      "formula_js": "(L, W, D, split_ratio=0.60) => { const topH = D * split_ratio; const botH = D - topH; const topV = Math.PI * L * W * topH / 6; const botV = (1/3) * Math.PI * (W/2)**2 * botH; const tip = topV * 0.01; return topV + botV + tip; }"
    },

    {
      "id": "pearl_round",
      "name": "Pearl Round (perfect sphere)",
      "description": "真珠はほぼ球体のため厳密な球モデルをそのまま採用。",
      "formula_text": "V = 4/3 * π * (d/2)^3",
      "formula_js": "(d) => (4/3) * Math.PI * Math.pow(d/2, 3)"
    },

    {
      "id": "pearl_mabe",
      "name": "Mabe Pearl (hemisphere refined)",
      "description": "マベパールはほぼ楕円半球なので半球×楕円率モデルで近似。",
      "formula_text": "V = 2/3 * π * (L/2) * (W/2) * h",
      "formula_js": "(L, W, h) => (2/3) * Math.PI * (L/2) * (W/2) * h"
    }
  ]
}